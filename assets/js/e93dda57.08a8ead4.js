"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["4638"],{71012(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>a,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var s=r(39112),i=r(74848),c=r(28453);let l={title:"JavaScript \u5F02\u6B65\u7F16\u7A0B",date:new Date("2017-03-22T15:48:00.000Z"),update:new Date("2018-06-03T13:46:00.000Z"),authors:"wang1212",tags:["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","JavaScript","\u5F02\u6B65\u7F16\u7A0B"],keywords:["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","JavaScript","\u5F02\u6B65\u7F16\u7A0B"],description:"JavaScript \u4F5C\u4E3A\u4E00\u95E8\u5728 Web \u5F00\u53D1\u4E2D\u7684\u4E3B\u6D41\u8BED\u8A00\uFF0C\u5E38\u5E38\u6D89\u53CA\u5230\u4EA4\u4E92\u4E8B\u4EF6\u65B9\u9762\u7684\u5E94\u7528\uFF0C\u8FD9\u4E0D\u53EF\u907F\u514D\u7684\u7528\u5230\u4E86\u5F02\u6B65\u7F16\u7A0B\u7684\u65B9\u6CD5\uFF0C\u800C\u5B83\u672C\u8EAB\u5219\u662F\u5355\u7EBF\u7A0B\u8FD0\u884C\u7684\u3002\u5728\u4EE5\u5F80\u7684\u5F00\u53D1\u4E2D\uFF0C\u5F02\u6B65\u7F16\u7A0B\u6B63\u53D8\u5F97\u8D8A\u6765\u8D8A\u96BE\u7BA1\u7406\uFF0C\u65B0\u7684 Promise \u6807\u51C6 API \u5C06\u4F7F\u5F97\u5F02\u6B65\u7F16\u7A0B\u66F4\u52A0\u65B9\u4FBF\u3001\u5B89\u5168\u3002"},t,o={authorsImageUrls:[void 0]},d=[{value:"\u5F02\u6B65\u4E0E\u5E76\u884C",id:"\u5F02\u6B65\u4E0E\u5E76\u884C",level:2},{value:"\u4EFB\u52A1\u961F\u5217",id:"\u4EFB\u52A1\u961F\u5217",level:2},{value:"JavaScript \u4E8B\u4EF6\u8F6E\u8BE2\u673A\u5236",id:"javascript-\u4E8B\u4EF6\u8F6E\u8BE2\u673A\u5236",level:3},{value:"\u51FD\u6570\u56DE\u8C03",id:"\u51FD\u6570\u56DE\u8C03",level:2},{value:"\u5D4C\u5957\u56DE\u8C03",id:"\u5D4C\u5957\u56DE\u8C03",level:3},{value:"\u4FE1\u4EFB\u95EE\u9898",id:"\u4FE1\u4EFB\u95EE\u9898",level:3},{value:"Promise",id:"promise",level:2},{value:"\u57FA\u672C API",id:"\u57FA\u672C-api",level:3},{value:"resolve() \u548C reject()",id:"resolve-\u548C-reject",level:4},{value:"then() \u548C catch()",id:"then-\u548C-catch",level:4},{value:"all() \u548C race()",id:"all-\u548C-race",level:4},{value:"\u5C40\u9650\u6027",id:"\u5C40\u9650\u6027",level:3},{value:"Fetch",id:"fetch",level:2},{value:"Ajax\uFF08XMLHttpRequest\uFF09",id:"ajaxxmlhttprequest",level:3},{value:"Fetch \u66F4\u7B80\u6D01\u7684\u5907\u9009\u65B9\u6848",id:"fetch-\u66F4\u7B80\u6D01\u7684\u5907\u9009\u65B9\u6848",level:3},{value:"\u9ED8\u8BA4\u4E0D\u643A\u5E26 Cookie",id:"\u9ED8\u8BA4\u4E0D\u643A\u5E26-cookie",level:4},{value:"\u4EC5\u5728\u8BF7\u6C42\u4E0D\u80FD\u5B8C\u6210\u65F6 reject",id:"\u4EC5\u5728\u8BF7\u6C42\u4E0D\u80FD\u5B8C\u6210\u65F6-reject",level:4},{value:"GET \u8BF7\u6C42",id:"get-\u8BF7\u6C42",level:4},{value:"POST \u8BF7\u6C42",id:"post-\u8BF7\u6C42",level:4},{value:"\u53C2\u8003",id:"\u53C2\u8003",level:2}];function h(e){let n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"JavaScript \u4F5C\u4E3A\u4E00\u95E8\u5728 Web \u5F00\u53D1\u4E2D\u7684\u4E3B\u6D41\u8BED\u8A00\uFF0C\u5E38\u5E38\u6D89\u53CA\u5230\u4EA4\u4E92\u4E8B\u4EF6\u65B9\u9762\u7684\u5E94\u7528\uFF0C\u8FD9\u4E0D\u53EF\u907F\u514D\u7684\u7528\u5230\u4E86\u5F02\u6B65\u7F16\u7A0B\u7684\u65B9\u6CD5\uFF0C\u800C\u5B83\u672C\u8EAB\u5219\u662F\u5355\u7EBF\u7A0B\u8FD0\u884C\u7684\u3002\u5728\u4EE5\u5F80\u7684\u5F00\u53D1\u4E2D\uFF0C\u5F02\u6B65\u7F16\u7A0B\u6B63\u53D8\u5F97\u8D8A\u6765\u8D8A\u96BE\u7BA1\u7406\uFF0C\u65B0\u7684 Promise \u6807\u51C6 API \u5C06\u4F7F\u5F97\u5F02\u6B65\u7F16\u7A0B\u66F4\u52A0\u65B9\u4FBF\u3001\u5B89\u5168\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u5F02\u6B65\u4E0E\u5E76\u884C",children:"\u5F02\u6B65\u4E0E\u5E76\u884C"}),"\n",(0,i.jsx)(n.p,{children:"\u4F5C\u4E3A Web \u524D\u7AEF\u5F00\u53D1\u4E2D\u7684\u4E3B\u6D41\u8BED\u8A00\uFF0CJavaScript \u9700\u8981\u5B9E\u73B0\u8BF8\u591A\u7684\u4EA4\u4E92\u52A8\u4F5C\uFF0C\u4F46\u662F\u5728\u5BBF\u4E3B\u73AF\u5883\uFF08\u4F8B\u5982 v8\uFF09\u4E2D JS \u5F15\u64CE\u53EA\u6709\u4E00\u4E2A\u4E3B\u7EBF\u7A0B\uFF0C\u6240\u4EE5\u591A\u7EBF\u7A0B\u5E76\u884C\u5904\u7406\u662F\u4E0D\u53EF\u80FD\u7684\u3002\u56E0\u6B64\uFF0C\u5F02\u6B65\u7F16\u7A0B\u663E\u5F97\u5C24\u4E3A\u91CD\u8981\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5F02\u6B65\u662F\u65F6\u95F4\u987A\u5E8F\u4E0A\u7684\u6982\u5FF5\uFF0C\u4EE3\u8868\u7740\u73B0\u5728\u4E0E\u672A\u6765\u67D0\u4E00\u65F6\u523B\u3002\u6700\u5178\u578B\u7684\u5C31\u662F\u53D1\u9001 Ajax \u8BF7\u6C42\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$.ajax('', function(){\n // do something\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u901A\u5E38\u6211\u4EEC\u73B0\u5728\u53D1\u9001\u4E00\u4E2A\u5F02\u6B65\u7684 Ajax \u8BF7\u6C42\uFF0C\u7136\u540E\u4F7F\u7528\u51FD\u6570\u56DE\u8C03\u5728\u672A\u6765\u67D0\u4E00\u65F6\u523B\u6267\u884C\u4E00\u4E9B\u4E8B\u60C5\u3002",(0,i.jsx)(n.strong,{children:"\u800C\u51FD\u6570\u56DE\u8C03\u6B63\u662F\u6211\u4EEC\u5B9E\u73B0\u5F02\u6B65\u7F16\u7A0B\u7684\u4E00\u4E2A\u91CD\u8981\u9014\u5F84\u3002"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u540C\u65F6\uFF0C\u5E76\u884C\u53C8\u662F\u4E00\u4E2A\u91CD\u8981\u7684\u6982\u5FF5\uFF0C\u5B83\u4E0D\u540C\u4E8E\u5F02\u6B65\uFF0C",(0,i.jsx)(n.strong,{children:"\u5E76\u884C\u7684\u610F\u4E49\u5728\u4E8E\u540C\u4E00\u65F6\u95F4\u53D1\u751F\u4EC0\u4E48"}),"\u3002\u8FDB\u7A0B\u548C\u7EBF\u7A0B\u72EC\u7ACB\u8FD0\u884C\uFF0C\u5E76\u53EF\u80FD\u540C\u65F6\u8FD0\u884C\uFF0C\u591A\u4E2A\u7EBF\u7A0B\u901A\u5E38\u4F1A\u5171\u4EAB\u5355\u4E2A\u8FDB\u7A0B\u7684\u5185\u5B58\u3002\u8FD9\u5C31\u610F\u5473\u7740\uFF0C\u5177\u5907\u591A\u7EBF\u7A0B\u5E76\u53D1\u80FD\u529B\u7684\u8BDD\uFF0C\u540C\u65F6\u4E5F\u4F1A\u5E26\u6765\u8BF8\u591A\u7684\u95EE\u9898\u3002JS \u7684\u5BBF\u4E3B\u73AF\u5883\u6D4F\u89C8\u5668\u4EC5\u63D0\u4F9B\u4E86\u4E00\u4E2A\u4E3B\u7EBF\u7A0B\uFF0C\u8BA9 Web \u5F00\u53D1\u7684\u96BE\u5EA6\u5927\u5927\u964D\u4F4E\uFF0C\u4E0D\u7528\u8003\u8651\u591A\u7EBF\u7A0B\u5E76\u53D1\u6240\u5E26\u6765\u7684\u8BF8\u591A\u95EE\u9898\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4EFB\u52A1\u961F\u5217",children:"\u4EFB\u52A1\u961F\u5217"}),"\n",(0,i.jsx)(n.p,{children:"\u867D\u7136\uFF0CJS \u6CA1\u6709\u591A\u7EBF\u7A0B\u5E76\u53D1\u80FD\u529B\uFF0C\u4F46\u662F\u5E76\u53D1\u5374\u662F\u975E\u5E38\u6709\u7528\u7684\u3002\u5728\u4E00\u4E2A\u4F18\u79C0\u7684\u524D\u7AEF\u5E94\u7528\u4E2D\uFF0C\u4EA4\u4E92\u662F\u975E\u5E38\u6D41\u7545\u7684\uFF0C\u8FD9\u5F97\u76CA\u4E8E\u826F\u597D\u7684\u7F16\u7A0B\u80FD\u529B\u6240\u6A21\u62DF\u51FA\u6765\u7684\u5E76\u53D1\u6548\u679C\u3002"}),"\n",(0,i.jsx)(n.p,{children:"JS \u5728\u6D4F\u89C8\u5668\u4E2D\u6267\u884C\u7684\u6A21\u5F0F\u662F\u4E00\u79CD\u4EFB\u52A1\u961F\u5217\u7684\u5F62\u5F0F\uFF0C\u591A\u4E2A\u4EFB\u52A1\u6392\u6210\u961F\u7B49\u5F85\u4E3B\u7EBF\u7A0B\u8C03\u7528 JS \u5F15\u64CE\u6267\u884C\u81EA\u5DF1\u7684\u4EE3\u7801\u3002\u8FD9\u5E76\u4E0D\u4F1A\u51FA\u73B0\u591A\u7EBF\u7A0B\u4E2D\u7684\u7ADE\u4E89\u72B6\u6001\uFF0C\u4F46\u8FD9\u4E5F\u610F\u5473\u7740\u7CDF\u7CD5\u7684\u7F16\u7A0B\u65B9\u5F0F\u53EF\u80FD\u4F1A\u56E0\u4E3A\u4E00\u4E2A\u4EFB\u52A1\u800C\u5BFC\u81F4\u6574\u4E2A\u4EFB\u52A1\u94FE\u88AB\u963B\u585E\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"function response(data){\n // data \u662F\u4E00\u4E2A\u5927\u6570\u7EC4\uFF0C\u5E76\u8981\u8FDB\u884C\u904D\u5386\u5904\u7406\n var temp = data;\n\n temp.map(function(val){\n  return val * 2;\n });\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679C\u8BF4 ",(0,i.jsx)(n.code,{children:"data"})," \u7684\u5927\u5C0F\u5728 1000 \u5DE6\u53F3\u53EF\u4EE5\u88AB\u77AC\u95F4\u5904\u7406\u5B8C\u6210\uFF0C\u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"data"})," \u7684\u5927\u5C0F\u7A81\u7136\u53D8\u6210\u51E0\u5341\u4E07\u5462\uFF1F\u6240\u4EE5\uFF0C\u8FD9\u6837\u7684\u7F16\u7A0B\u65B9\u5F0F\u5F88\u5BB9\u6613\u56E0\u4E3A\u5355\u4E2A\u4EFB\u52A1\u5BFC\u81F4\u5176\u5B83\u4EFB\u52A1\u88AB\u4E25\u91CD\u963B\u585E\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"function response(data){\n // \u4E00\u6B21\u53EA\u5904\u7406 1000 \u4E2A\n var temp = data.splice(0, 1000);\n\n temp.map(function(val){\n  return val * 2;\n });\n\n // \u5269\u4F59\u7684\u7A0D\u540E\u7EE7\u7EED\u5904\u7406\n if(data.length > 0){\n  setTimeout(function(){\n   response(data);\n  }, 0);\n }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7ECF\u8FC7\u7279\u6B8A\u5904\u7406\u4E4B\u540E\u7684\u7A0B\u5E8F\uFF0C\u4E00\u6B21\u53EA\u5904\u7406\u4E00\u90E8\u5206\u6570\u636E\uFF0C\u5C06\u4E00\u4E2A\u5927\u4EFB\u52A1\u5206\u5272\u6210\u591A\u4E2A\u5C0F\u4EFB\u52A1\u6765\u5B8C\u6210\uFF0C\u5C31\u4F1A\u907F\u514D\u963B\u585E\u4EFB\u52A1\u94FE\u7684\u60C5\u51B5\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"javascript-\u4E8B\u4EF6\u8F6E\u8BE2\u673A\u5236",children:"JavaScript \u4E8B\u4EF6\u8F6E\u8BE2\u673A\u5236"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 JS \u5F15\u64CE\u4E2D\uFF0C\u57FA\u4E8E\u5355\u7EBF\u7A0B\u91C7\u7528\u4E86\u4E8B\u4EF6\u8F6E\u8BE2\uFF08event loop\uFF09\u673A\u5236\u6765\u5B9E\u73B0\u9AD8\u5E76\u53D1\uFF0C\u4E0E\u5355\u6838 CPU \u5904\u7406\u591A\u4EFB\u52A1\u8FDB\u7A0B\u662F\u76F8\u4F3C\u7684\u3002",(0,i.jsx)(n.strong,{children:"\u4E3B\u7EBF\u7A0B\u8D1F\u8D23\u5904\u7406\u5355\u4E2A\u4EFB\u52A1\uFF08macrotask\uFF09\u7684\u6240\u6709\u6D41\u7A0B\uFF08microtask\uFF09\uFF0C\u4E3B\u7EBF\u7A0B\u4F1A\u5C06\u540C\u4E00\u4E2A\u4EFB\u52A1\u7684\u6240\u6709\u6D41\u7A0B\u5904\u7406\u5B8C\u6BD5\u4E4B\u540E\u518D\u53BB\u8BE2\u95EE\u4EFB\u52A1\u961F\u5217\u662F\u5426\u6709\u65B0\u7684\u4EFB\u52A1\u9700\u8981\u6267\u884C\uFF0C\u5982\u679C\u6709\u5219\u4F1A\u5C06\u65B0\u7684\u4E00\u4E2A\u4EFB\u52A1\u653E\u5230\u4E3B\u7EBF\u7A0B\u53BB\u5904\u7406\uFF0C\u5982\u6B64\u5F80\u590D\u5FAA\u73AF\u3002"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"macrotask"}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4EEC\u53EF\u4EE5\u5C06\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"macrotask"})," \u770B\u4F5C\u4E00\u4E2A\u4EFB\u52A1\uFF0C\u591A\u4E2A\u4EFB\u52A1\u5B58\u653E\u5728\u4EFB\u52A1\u961F\u5217\u4E2D\uFF0C\u7B49\u5F85\u4E3B\u7EBF\u7A0B\u5904\u7406\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"microtask"}),"\n",(0,i.jsxs)(n.p,{children:["\u800C\u5BF9\u4E8E\u4E00\u4E2A\u4EFB\u52A1\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6709\u66F4\u7EC6\u7C92\u5EA6\u7684\u5212\u5206\uFF0C\u5373\u591A\u4E2A\u6D41\u7A0B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"microtask"})," \u770B\u4F5C\u4EFB\u52A1\u7684\u4E00\u4E2A\u6D41\u7A0B\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"**\u5728\u6B64\u57FA\u7840\u4E0A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7406\u89E3\u4E3A\u4EFB\u52A1\u961F\u5217\u5305\u542B\u591A\u4E2A\u4EFB\u52A1\uFF08macrotask\uFF09\uFF0C\u800C\u5355\u4E2A\u4EFB\u52A1\u53C8\u5305\u542B\u591A\u4E2A\u6D41\u7A0B\uFF08microtask\uFF09\u3002**\u8FD9\u6837\u6211\u4EEC\u5BF9\u4E1A\u52A1\u903B\u8F91\u7684\u5904\u7406\u53EF\u4EE5\u6709\u66F4\u7EC6\u7C92\u5EA6\u7684\u638C\u63A7\uFF0C\u540C\u6837\u5730\u6709\u4EE5\u4E0B API \u6765\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E00\u4E9B\u89E3\u51B3\u65B9\u6848\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["macrotask \u7CFB\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"setTimeout"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"setInterval"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"setImmediate"})}),"\n",(0,i.jsx)(n.li,{children:"I/O"}),"\n",(0,i.jsx)(n.li,{children:"UI rendering"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["microtask \u7CFB\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"process.nextTick"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Promise"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"MutationObserver"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"setTimeout(() => console.log(1));\n\nPromise.resolve(true)\n .then(() => console.log(2))\n .then(() => console.log(3))\n .then(() => console.log(4));\n\nsetTimeout(() => console.log(5));\n\n// console\n2 3 4 1 5\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4E4B\u6240\u4EE5\u8F93\u51FA\u987A\u5E8F\u662F ",(0,i.jsx)(n.code,{children:"2 3 4 1 5"}),"\uFF0C\u5C31\u662F\u56E0\u4E3A ",(0,i.jsx)(n.code,{children:"Promise"})," \u5C5E\u4E8E microtask \u7CFB\uFF0C\u4E5F\u5C31\u662F\u8BF4\u65E0\u8BBA\u6709\u591A\u5C11\u4E2A ",(0,i.jsx)(n.code,{children:"then"})," \u56DE\u8C03\uFF0C\u5B83\u4EEC\u90FD\u5C5E\u4E8E\u540C\u4E00\u4E2A\u4EFB\u52A1\u7684\u4E0D\u540C\u6D41\u7A0B\uFF0C\u53EA\u6709\u8FD9\u4E9B\u6D41\u7A0B\u5168\u90E8\u5904\u7406\u5B8C\uFF0C\u4E3B\u7EBF\u7A0B\u624D\u4F1A\u5904\u7406\u4E0B\u4E00\u4E2A\u4EFB\u52A1\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u56E0\u6B64\uFF0C\u660E\u767D JS \u7684\u4E8B\u4EF6\u8F6E\u8BE2\u673A\u5236\u4EE5\u53CA\u4EFB\u52A1\u961F\u5217\u6A21\u578B\uFF0C\u5E76\u4FDD\u6301\u826F\u597D\u7684\u7F16\u7A0B\u4E60\u60EF\u4F1A\u8BA9 Web \u5E94\u7528\u66F4\u6D41\u7545\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u51FD\u6570\u56DE\u8C03",children:"\u51FD\u6570\u56DE\u8C03"}),"\n",(0,i.jsx)(n.p,{children:"\u51FD\u6570\u56DE\u8C03\u662F\u5B9E\u73B0 JS \u5F02\u6B65\u7F16\u7A0B\u7684\u91CD\u8981\u9014\u5F84\uFF0C\u57FA\u672C\u4E0A\u7EDD\u5927\u591A\u6570\u5F02\u6B65\u4EE3\u7801\u90FD\u4F7F\u7528\u4E86\u51FD\u6570\u56DE\u8C03\u3002\u5F53\u7136\uFF0C\u4E8B\u4EF6\u76D1\u542C\u4E5F\u662F\u6211\u4EEC\u7528\u6765\u8FDB\u884C\u5F02\u6B65\u7F16\u7A0B\u7684\u4E00\u79CD\u65B9\u5F0F\uFF0C\u53EA\u4E0D\u8FC7\u524D\u8005\u66F4\u5E7F\u6CDB\u4E00\u4E9B\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u6700\u5178\u578B\u7684\u51FD\u6570\u56DE\u8C03\u4F9D\u7136\u662F ajax \u8BF7\u6C42\najax('', function(){\n // do something\n});\n\n// \u4E8B\u4EF6\u4E5F\u662F\u4E00\u79CD\u5F02\u6B65\u7F16\u7A0B\u7684\u65B9\u5F0F\n$('#id').onclick = function(){\n // do something\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u5D4C\u5957\u56DE\u8C03",children:"\u5D4C\u5957\u56DE\u8C03"}),"\n",(0,i.jsx)(n.p,{children:"\u4F46\u662F\uFF0C\u5728\u8F83\u4E3A\u590D\u6742\u7684\u5E94\u7528\u4E2D\uFF0C\u975E\u5E38\u6709\u53EF\u80FD\u51FA\u73B0\u5D4C\u5957\u56DE\u8C03\u7684\u60C5\u5F62\uFF0C\u8FD9\u65F6\u5019\u4EE3\u7801\u7EF4\u62A4\u4F1A\u53D8\u7684\u56F0\u96BE\u8D77\u6765\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u5D4C\u5957\u56DE\u8C03\n$('#id').addEventListener('click', function(){\n $.ajax('', function(){\n  setTimeout(function(){\n   // do something\n  }, 1000);\n });\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4E5F\u8BB8\uFF0C\u5728\u6211\u4EEC\u5F53\u65F6\u5199\u7684\u65F6\u5019\u4F1A\u5F88\u987A\u7545\uFF0C\u4F46\u4EE5\u540E\u56DE\u8FC7\u5934\u6765\u770B\uFF0C\u4EE3\u7801\u7EF4\u62A4\u7684\u5DE5\u4F5C\u91CF\u4F1A\u9AA4\u5347\u3002\u8FD9\u91CC\u7684\u7A0B\u5E8F\u53EF\u80FD\u8FD8\u4E0D\u591F\u590D\u6742\uFF0C\u4E00\u65E6\u53D8\u5F97\u66F4\u590D\u6742\u4E00\u4E9B\uFF0C\u5E94\u7528\u7684\u5B89\u5168\u5C06\u53D8\u7684\u8106\u5F31\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u56E0\u6B64\uFF0C\u5D4C\u5957\u7684\u51FD\u6570\u56DE\u8C03\u662F\u975E\u5E38\u4E25\u91CD\u7684\u95EE\u9898\uFF0C\u6211\u4EEC\u671F\u671B\u6709\u4E00\u79CD\u65B0\u7684\u65B9\u5F0F\u53BB\u6539\u53D8\u8FD9\u79CD\u73B0\u72B6\uFF0C\u540E\u9762\u5C06\u4F1A\u8BB2\u5230 Promise API\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u4FE1\u4EFB\u95EE\u9898",children:"\u4FE1\u4EFB\u95EE\u9898"}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u6B64\u4E4B\u5916\uFF0C\u51FD\u6570\u56DE\u8C03\u8FD8\u6709\u4E00\u4E2A\u975E\u5E38\u9690\u79D8\u7684\u5B89\u5168\u95EE\u9898---\u4FE1\u4EFB\u95EE\u9898\u3002\u5728\u8FD9\u4E4B\u524D\uFF0C\u6211\u4EEC\u5047\u8BBE\u6240\u6709\u7684\u56DE\u8C03\u51FD\u6570\u6700\u7EC8\u90FD\u4F1A\u88AB\u8C03\u7528\uFF0C\u4F46\u4E8B\u5B9E\u771F\u662F\u5982\u6B64\u5417\uFF1F"}),"\n",(0,i.jsx)(n.p,{children:"\u8FD8\u662F\u4EE5 jQuery \u4E2D Ajax API \u4E3A\u4F8B\uFF0C\u6211\u4EEC\u90FD\u786E\u4FE1\u4F20\u5165\u7684\u56DE\u8C03\u51FD\u6570\u6700\u7EC8\u4F1A\u88AB\u8C03\u7528\uFF0C\u4F46\u8FD9\u4F9D\u7136\u662F\u4F5C\u4E3A jQuery \u56E2\u961F\u7684\u7B2C\u4E09\u65B9\u6765\u51B3\u5B9A\u7684\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"// \u8FD9\u662F\u4E00\u4E2A\u91D1\u878D\u7CFB\u7EDF\nfunction deal(userData, function(){\n // \u6267\u884C\u4EA4\u6613\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4EEC\u5F88\u96BE\u786E\u4FDD\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684 ",(0,i.jsx)(n.code,{children:"deal()"})," \u65B9\u6CD5\u4F1A\u5728\u5C06 ",(0,i.jsx)(n.code,{children:"userData"})," \u8FDB\u884C\u9A8C\u8BC1\u4E4B\u540E\u6267\u884C\u4EA4\u6613\uFF0C\u4E5F\u5C31\u662F\u8C03\u7528\u56DE\u8C03\u51FD\u6570\u3002\u4E07\u4E00\u56DE\u8C03\u51FD\u6570\u88AB\u6267\u884C\u4E86\u591A\u6B21\uFF0C\u6216\u8005\u4E00\u6B21\u90FD\u6CA1\u6267\u884C\uFF0C\u8FD9\u4E9B\u90FD\u662F\u6211\u4EEC\u4E0D\u53EF\u9884\u6599\u7684\u95EE\u9898\uFF0C\u4F46\u5374\u662F\u6781\u6613\u53D1\u751F\u7684\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u4E5F\u8BB8\u6211\u4EEC\u6BCF\u6B21\u90FD\u80FD\u53BB\u5408\u7406\u5730\u89E3\u51B3\u5B83\uFF0C\u4F46\u4E3A\u4F55\u4E0D\u5BFB\u627E\u4E00\u79CD\u4E00\u52B3\u6C38\u9038\u53C8\u5B89\u5168\u7684\u65B9\u5F0F\u5462\uFF0C\u65B0\u7684 Promise API \u6B63\u662F\u4E3A\u6B64\u800C\u6765\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"promise",children:"Promise"}),"\n",(0,i.jsx)(n.p,{children:"\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u521B\u5EFA\u4E00\u4E2A Promise :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"new Promise(function(resolve, reject){\n if (\u64CD\u4F5C\u6210\u529F){\n  return resolve(value);\n }\n // \u64CD\u4F5C\u5931\u8D25\n reject(error);\n});\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Promise \u6784\u9020\u5668\u63A5\u53D7\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u8BE5\u65B9\u6CD5\u6709\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u4E3A ",(0,i.jsx)(n.code,{children:"resolve"})," \u8868\u793A\u5B8C\u6210\uFF0C\u53E6\u4E00\u4E2A\u4E3A ",(0,i.jsx)(n.code,{children:"reject"})," \u8868\u793A\u62D2\u7EDD\uFF0C\u5728\u5F02\u6B65\u64CD\u4F5C\u5B8C\u6210\u4E4B\u540E\u5C06\u4F1A\u6839\u636E\u7ED3\u679C\u8C03\u7528\u5176\u4E2D\u4E00\u4E2A\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4E00\u4E2A Promise \u5BF9\u8C61\u901A\u5E38\u4F1A\u5904\u4E8E\u4E09\u4E2A\u72B6\u6001\u4E4B\u4E2D\u7684\u4E00\u79CD\uFF1A\u7B49\u5F85\uFF08Pending\uFF09\u3001\u5B8C\u6210\uFF08Resolved\uFF09\u3001\u62D2\u7EDD\uFF08Rejected\uFF09\u3002\u800C\u4E14\u8FD9\u79CD\u72B6\u6001\u7684\u6539\u53D8\u53D6\u51B3\u4E8E\u5F02\u6B65\u64CD\u4F5C\uFF0C",(0,i.jsx)(n.strong,{children:"\u4E00\u65E6\u6539\u53D8\u5C06\u65E0\u6CD5\u518D\u6B21\u88AB\u6539\u53D8"}),"\uFF0C\u6240\u4EE5\u662F\u4E0D\u53EF\u9006\u7684\u3002\u540C\u6837\u5730\uFF0C",(0,i.jsx)(n.strong,{children:"\u5982\u679C Promise \u4E00\u65E6\u521B\u5EFA\uFF0C\u5F02\u6B65\u64CD\u4F5C\u5C31\u4F1A\u5F00\u59CB\uFF0C\u5E76\u4E14\u6211\u4EEC\u662F\u65E0\u6CD5\u4E2D\u9014\u53BB\u4E2D\u65AD\u7684"}),"\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"Promise \u672C\u8D28\u4E0A\u662F\u4E00\u79CD\u5F02\u6B65\u7F16\u7A0B\u7684\u5F62\u5F0F\uFF0C\u8FD0\u7528\u7684\u8FD8\u662F\u56DE\u8C03\u51FD\u6570\uFF0C\u53EA\u4E0D\u8FC7\u8FD9\u79CD\u65B0\u7684\u5F62\u5F0F\u89E3\u51B3\u4E86\u5355\u7EAF\u4F7F\u7528\u56DE\u8C03\u51FD\u6570\u6240\u5B58\u5728\u7684\u4FE1\u4EFB\u95EE\u9898\u3002\u5C06\u51FD\u6570\u7684\u8C03\u7528\u6743\u4E0D\u518D\u7ED9\u4E88\u7B2C\u4E09\u65B9\uFF0C\u800C\u662F\u7531\u6211\u4EEC\u81EA\u5DF1\u6765\u51B3\u5B9A\u4F55\u65F6\u8C03\u7528\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u57FA\u672C-api",children:"\u57FA\u672C API"}),"\n",(0,i.jsx)(n.p,{children:"Promise \u6709\u51E0\u4E2A\u57FA\u672C\u7684 API \u7528\u6765\u7B80\u5316\u6211\u4EEC\u7684\u5F02\u6B65\u7F16\u7A0B\u64CD\u4F5C\uFF0C\u800C\u4E0D\u9700\u8981\u6BCF\u6B21\u90FD\u53BB\u4F7F\u7528\u6784\u9020\u51FD\u6570\u521B\u5EFA\u65B0\u7684 Promise \u5BF9\u8C61\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"resolve-\u548C-reject",children:"resolve() \u548C reject()"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u4EC5\u4EC5\u662F\u9700\u8981\u4E00\u4E2A\u62D2\u7EDD\u72B6\u6001\u7684 Promise\uFF0C\u4EE5\u4E0B\u65B9\u5F0F\u662F\u7B49\u4EF7\u7684\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var p1 = new Promise(function(resolve, reject){\n reject('error');\n});\n\nvar p2 = Promise.reject('error');\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Promise.resolve()"})," \u901A\u5E38\u7528\u6765\u521B\u5EFA\u4E00\u4E2A\u5DF2\u5B8C\u6210\u7684 Promise\uFF0C\u53EF\u80FD\u5931\u8D25\u4E5F\u53EF\u80FD\u6210\u529F\uFF0C\u6839\u636E\u4F20\u5165\u7684\u503C\u6765\u51B3\u5B9A\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var p3 = Promise.resolve(value);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4F20\u5165\u7684 ",(0,i.jsx)(n.code,{children:"value"})," \u5982\u679C\u662F\u4E00\u4E2A Promise \u5BF9\u8C61\uFF0C\u5219\u5B83\u4EC0\u4E48\u4E5F\u4E0D\u4F1A\u505A\uFF0C\u53EA\u662F\u7B80\u5355\u7684\u8FD4\u56DE\u8BE5 Promise \u7684\u72B6\u6001\u503C\uFF1B\u4F46\u662F\uFF0C\u5982\u679C ",(0,i.jsx)(n.code,{children:"value"})," \u662F\u4E00\u4E2A\u503C\uFF0C\u5B83\u4F1A\u81EA\u52A8\u521B\u5EFA\u4E00\u4E2A Promise \u5BF9\u8C61\u5E76\u6839\u636E\u503C\u505A\u51FA\u51B3\u8BAE\uFF0C\u7136\u540E\u8FD4\u56DE\u51B3\u8BAE\u503C\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"then-\u548C-catch",children:"then() \u548C catch()"}),"\n",(0,i.jsxs)(n.p,{children:["\u524D\u9762\u6211\u4EEC\u8BF4\u8FC7\uFF0C\u56DE\u8C03\u51FD\u6570\u7684\u5D4C\u5957\u662F\u4E0D\u5229\u4E8E\u4EE3\u7801\u7EF4\u62A4\u7684\uFF0C\u90A3\u4E48 ",(0,i.jsx)(n.code,{children:"Promise.then()"})," \u5219\u63D0\u4F9B\u4E86\u94FE\u5F0F\u7684\u5F02\u6B65\u64CD\u4F5C\u65B9\u5F0F\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var p4 = new Promise(function(resolve, reject){\n // do something\n});\n\np4.then(fulfilled, rejected).then(fulfilled, rejected);\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"then()"})," \u65B9\u6CD5\u7684\u4E24\u4E2A\u53C2\u6570\u7C7B\u4F3C\u4E8E\u6784\u9020\u5668\u4E2D\u56DE\u8C03\u65B9\u6CD5\u7684\u4E24\u4E2A\u53C2\u6570\uFF0C\u4EE3\u8868\u7740\u5B8C\u6210\u548C\u62D2\u7EDD\u64CD\u4F5C\u3002\u6211\u4EEC\u4E4B\u6240\u4EE5\u53EF\u4EE5\u8FDB\u884C\u94FE\u5F0F\u64CD\u4F5C\uFF0C\u662F\u56E0\u4E3A\u6BCF\u4E00\u4E2A Promise \u7684 API \u90FD\u4F1A\u6700\u7EC8\u8FD4\u56DE\u4E00\u4E2A Promise \u5BF9\u8C61\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u66F4\u7075\u6D3B\u7684\u8FDB\u884C\u7F16\u7801\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6709\u65F6\u5019\uFF0C\u6211\u4EEC\u53EA\u5E0C\u671B\u5355\u7EAF\u7684\u8FDB\u884C\u9519\u8BEF\u5904\u7406\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u7684\u7B49\u4EF7\u65B9\u5F0F\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"p4.then(null, rejected);\n\np4.catch(rejected);\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8FD9\u6837\u5E76\u975E\u662F\u6CA1\u6709\u63A5\u6536\u5B8C\u6210\u72B6\u6001\u7684\u51B3\u8BAE\u503C\uFF0C\u800C\u662F\u5C06\u5176\u4F20\u5165\u4E0B\u5C42\u7684 Promise \u5BF9\u8C61\u4E2D\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"all-\u548C-race",children:"all() \u548C race()"}),"\n",(0,i.jsx)(n.p,{children:"\u8FD9\u4E24\u4E2A API \u90FD\u662F\u8F85\u52A9\u6027\u65B9\u6CD5\uFF0C\u5B83\u4EEC\u90FD\u63A5\u53D7\u4E00\u4E2A Promise \u5BF9\u8C61\u6570\u7EC4\u4F5C\u4E3A\u53C2\u6570\u3002"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Promise.all()"})," \u5219\u4F1A\u5728\u6240\u6709\u4F20\u5165\u7684 Promise \u90FD\u5904\u4E8E\u5B8C\u6210\uFF08resolved\uFF09\u72B6\u6001\u65F6\uFF0C\u8FD4\u56DE\u5B8C\u6210\u72B6\u6001\u7684 Promise\uFF0C\u5426\u5219\u8FD4\u56DE\u62D2\u7EDD\u72B6\u6001\u7684 Promise\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var p1 = Promise.resolve(42),\n p2 = Promise.resolve('Hello World'),\n p3 = Promise.reject('Error');\n\nPromise.all([p1, p2, p3])\n .catch(function(err){\n  console.log(err);  // 'Error'\n });\n\nPromise.all([p1, p2])\n .then(function(msgs){\n  console.log(msgs);  // [42, 'Hello World']\n });\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Promise.race()"})," \u4F1A\u5728\u4F20\u5165\u7684\u6240\u6709 Promise \u4E2D\u7B2C\u4E00\u4E2A\u51B3\u8BAE\u5B8C\u6210\u65F6\uFF0C\u5C31\u8FD4\u56DE\u8BE5 Promise\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Promise.race([p1, p2, p3])\n .then(function(msg){\n  console.log(msg);  // 42\n });\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u524D\u8005\u82E5\u4F20\u5165\u4E00\u4E2A\u7A7A\u6570\u7EC4\uFF0C\u5B83\u4F1A\u7ACB\u5373\u51B3\u8BAE\u5B8C\u6210\uFF0C\u800C\u540E\u8005\u4F1A\u6C38\u8FDC\u5904\u4E8E\u7B49\u5F85\u72B6\u6001\u3002"})}),"\n",(0,i.jsx)(n.h3,{id:"\u5C40\u9650\u6027",children:"\u5C40\u9650\u6027"}),"\n",(0,i.jsxs)(n.p,{children:["\u9996\u5148\uFF0CPromise \u94FE\u7684\u51B3\u8BAE\u7ED3\u679C\u662F\u987A\u5E8F\u4F20\u9012\u5730\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5982\u679C\u5176\u4E2D\u53D1\u751F\u9519\u8BEF\u6216\u53D8\u4E3A\u62D2\u7EDD\u72B6\u6001\uFF0C\u76F4\u5230\u9047\u5230\u7B2C\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"rejected"})," \u65B9\u6CD5\uFF0C\u8BE5\u9519\u8BEF\u624D\u4F1A\u88AB\u6355\u83B7\u3002\u540C\u65F6\uFF0C\u56E0\u4E3A\u7B2C\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"rejected"})," \u65B9\u6CD5\u5DF2\u5C06\u8BE5\u9519\u8BEF\u6355\u83B7\u5E76\u5904\u7406\uFF0C\u6B64\u65F6\u540E\u7EED\u7684 Promise \u94FE\u5C06\u5931\u53BB\u4F5C\u7528\uFF0C\u8FD9\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\u4E0D\u662F\u6211\u4EEC\u60F3\u8981\u7684\u7ED3\u679C\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var p = new Promise(function(resolve, reject){\n // do something\n})\n .then(step1)\n .then(step2)\n .then(step3)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8FD9\u4E2A Promise \u94FE\u4E2D\u6CA1\u6709 ",(0,i.jsx)(n.code,{children:"rejected"})," \u65B9\u6CD5\uFF0C\u56E0\u6B64\u4E00\u65E6\u53D1\u751F\u9519\u8BEF\u6216\u8F6C\u53D8\u4E3A\u62D2\u7EDD\u72B6\u6001\uFF0C\u51B3\u8BAE\u503C\u5C06\u6C38\u8FDC\u5F97\u4E0D\u5230\u5904\u7406\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6BCF\u4E00\u4E2A Promise \u53EA\u4F1A\u4EA7\u751F\u4E00\u4E2A\u51B3\u8BAE\u503C\uFF0C\u6240\u4EE5\u6211\u4EEC\u5E94\u8BE5\u9075\u5FAA\u8BE5\u89C4\u5219\uFF0C\u5728\u9700\u8981\u8FD4\u56DE\u591A\u4E2A\u503C\u7684\u7A0B\u5E8F\u4E2D\uFF0C\u6211\u4EEC\u5C3D\u53EF\u80FD\u7684\u8FD4\u56DE\u591A\u4E2A Promise \uFF0C\u5C06\u5176\u6570\u7EC4\u4F20\u5165 ",(0,i.jsx)(n.code,{children:"Promise.all()"})," \u8F85\u52A9\u65B9\u6CD5\u4F1A\u66F4\u597D\u4E00\u4E9B\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"function getY(x){\n return new Promise(function(resolve, reject){\n  setTimeout(function(){\n   resolve(3 * x - 1);\n  }, 100);\n });\n}\n\n// \u5728\u6B64\u8FD4\u56DE\u591A\u4E2A Promise\nfunction foo(bar, baz){\n var x = bar * baz;\n\n return [\n  Promise.resolve(x),\n  getY(x)\n ];\n}\n\n// \u8FDB\u884C\u5904\u7406\nPromise.all(\n foo(10, 20)\n)\n .then(function([x, y]){\n  console.log(x, y);  // 200 599\n });\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8FD9\u91CC\uFF0C\u5728\u6700\u540E\u4F7F\u7528\u4E86\u4E00\u4E2A ES6 \u4E2D\u6570\u7EC4\u89E3\u6784\u8D4B\u503C\u7684\u7279\u6027\uFF0C\u4F7F\u5F97\u7A0B\u5E8F\u66F4\u4E3A\u7B80\u6D01\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u524D\u9762\u6211\u4EEC\u8BF4\u8FC7\uFF0C\u4E00\u65E6 Promise \u7684\u72B6\u6001\u6539\u53D8\uFF0C\u5C31\u65E0\u6CD5\u518D\u8FDB\u884C\u6539\u53D8\u4E86\uFF0CPromise \u662F\u5355\u51B3\u8BAE\u7684\u3002\u8FD9\u5728\u5F88\u591A\u65F6\u5019\u6709\u5229\u4E8E\u7A0B\u5E8F\u7684\u5B89\u5168\uFF0C\u4F46\u5728\u67D0\u4E9B\u65F6\u5019\u5374\u662F\u975E\u5E38\u5C34\u5C2C\u7684\uFF0C\u6BD4\u5982\u4EA4\u4E92\u4E8B\u4EF6\u3002",(0,i.jsx)(n.code,{children:"click"})," \u4E8B\u4EF6\u6BCF\u6B21\u89E6\u53D1\u90FD\u4F1A\u8FDB\u884C\u54CD\u5E94\uFF0C\u4F46 Promise \u5728\u7B2C\u4E00\u6B21\u89E6\u53D1\u540E\u5C31\u5DF2\u7ECF\u51B3\u8BAE\u8FC7\uFF0C\u6B64\u540E\u518D\u4E5F\u65E0\u6CD5\u6539\u53D8\u72B6\u6001\uFF0C\u8FD9\u5E76\u4E0D\u662F\u6211\u4EEC\u60F3\u8981\u7684\u6548\u679C\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5176\u6B21\uFF0CPromise \u4E00\u65E6\u521B\u5EFA\u5C31\u65E0\u6CD5\u88AB\u7EC8\u6B62\uFF0C\u6211\u4EEC\u901A\u8FC7\u5916\u90E8\u6765\u7EC8\u6B62\u4E00\u4E2A Promise \u662F\u975E\u5E38\u4E0D\u5B89\u5168\u7684\uFF0C\u56E0\u4E3A\u8FD9\u4F1A\u5F71\u54CD\u5176\u5B83 Promise \u7684\u51B3\u8BAE\u7ED3\u679C\u3002\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6BD4\u5982\u4E00\u65E6\u8BF7\u6C42\u8D85\u65F6\uFF0C\u6211\u4EEC\u5E0C\u671B\u80FD\u7ACB\u5373\u7EC8\u6B62 Promise\uFF0C\u4F46\u76EE\u524D\u8FD8\u6CA1\u6709\u66F4\u5B89\u5168\u7684\u65B9\u6CD5\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Promise \u867D\u7136\u76F8\u5BF9\u4E8E\u56DE\u8C03\u51FD\u6570\u66F4\u65B9\u4FBF\u3001\u7B80\u5355\u3002\u5B89\u5168\u4E00\u4E9B\uFF0C\u4F46\u5176\u672C\u8D28\u8FD8\u662F\u57FA\u4E8E\u56DE\u8C03\u51FD\u6570\u7684\uFF0C\u5E76\u4E14\u6BD4\u56DE\u8C03\u51FD\u6570\u8981\u505A\u7684\u4E8B\u60C5\u66F4\u591A\u3002\u8FD9\u4E5F\u5C31\u610F\u5473\u7740 Promise \u7684\u6027\u80FD\u53EF\u80FD\u5E76\u4E0D\u6BD4 \u56DE\u8C03\u51FD\u6570\u9AD8\uFF0C\u4F46\u56DE\u8FC7\u5934\u6765\u8BF4\uFF0C\u5FAE\u5C0F\u7684\u6027\u80FD\u635F\u5931\u4E0E\u6781\u5927\u7684\u4FBF\u5229\u548C\u5B89\u5168\u6765\u8BF4\uFF0C\u76F8\u4FE1\u540E\u8005\u662F\u6211\u4EEC\u9009\u62E9 Promise \u7684\u7406\u7531\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"fetch",children:"Fetch"}),"\n",(0,i.jsx)(n.p,{children:"\u57FA\u4E8E Promise API\uFF0C\u73B0\u5728\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u7B80\u5355\u3001\u65B9\u4FBF\u7684 Fetch API \u4F5C\u4E3A\u4E00\u79CD\u5F02\u6B65\u83B7\u53D6\u6570\u636E\u7684\u5907\u9009\u65B9\u6848\u3002Fetch \u5E76\u4E0D\u80FD\u5B8C\u5168\u66FF\u4EE3 Ajax\uFF0CFetch \u53EA\u662F\u7B80\u5355\u7684\u63D0\u4F9B\u4E86\u5F02\u6B65\u83B7\u53D6\u6570\u636E\u7684\u529F\u80FD\uFF0C\u800C Ajax \u5219\u63D0\u4F9B\u4E86\u4E00\u7CFB\u5217\u7684\u4E8B\u4EF6\u673A\u5236\u6765\u5E2E\u52A9\u6211\u4EEC\u66F4\u7EC6\u7C92\u5EA6\u7684\u638C\u63A7\u6570\u636E\u83B7\u53D6\u8FC7\u7A0B\u7684\u60C5\u51B5\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"ajaxxmlhttprequest",children:"Ajax\uFF08XMLHttpRequest\uFF09"}),"\n",(0,i.jsx)(n.p,{children:"\u5927\u591A\u65F6\u5019\u6211\u4EEC\u4F7F\u7528\u7684 Ajax API \u90FD\u662F\u5176\u5B83\u8F85\u52A9\u5E93\uFF08\u4F8B\u5982 jQuery\uFF09\u4E3A\u6211\u4EEC\u5C01\u88C5\u597D\u7684\uFF0C\u800C\u539F\u751F\u7684 Ajax \u4F7F\u7528\u662F\u8FD9\u6837\u7684\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'var xmlhttp;\nif (window.XMLHttpRequest){\n //  IE7+, Firefox, Chrome, Opera, Safari \u6D4F\u89C8\u5668\u6267\u884C\u4EE3\u7801\n xmlhttp = new XMLHttpRequest();\n} else {\n // IE6, IE5 \u6D4F\u89C8\u5668\u6267\u884C\u4EE3\u7801\n xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");\n}\n\nxmlhttp.onreadystatechange = function(){\n if (xmlhttp.readyState == 4 && xmlhttp.status == 200){\n  document.getElementById("myDiv").innerHTML = xmlhttp.responseText;\n }\n}\n\nxmlhttp.open("GET", "/api/getData", true);\nxmlhttp.send();\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u539F\u751F\u7684 Ajax \u4F7F\u7528\u8D77\u6765\u662F\u6BD4\u8F83\u9EBB\u70E6\u7684\uFF0C\u4F46\u540C\u6837\u5730\uFF0C",(0,i.jsx)(n.code,{children:"XMLHttpRequest"})," \u5BF9\u8C61\u63D0\u4F9B\u4E86\u8BB8\u591A\u4E8B\u4EF6\u6765\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E00\u4E9B\u5B9E\u9645\u9700\u6C42\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u4F8B\u5982\u8FDB\u5EA6\u663E\u793A\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"fetch-\u66F4\u7B80\u6D01\u7684\u5907\u9009\u65B9\u6848",children:"Fetch \u66F4\u7B80\u6D01\u7684\u5907\u9009\u65B9\u6848"}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u800C\uFF0C\u66F4\u591A\u7684\u573A\u666F\u4E0B\u6211\u4EEC\u53EA\u662F\u9700\u8981\u5F02\u6B65\u83B7\u53D6\u6570\u636E\u5373\u53EF\uFF0C\u4E0D\u9700\u8981\u90A3\u4E48\u7EC6\u7C92\u5EA6\u7684\u63A7\u5236\uFF0C\u8FD9\u65F6\u5019\u4F7F\u7528 Ajax \u53CD\u800C\u663E\u5F97\u975E\u5E38\u9EBB\u70E6\u4E86\uFF0C\u4E8E\u662F\u51FA\u73B0\u4E86 Fetch \u8FD9\u79CD\u4F7F\u7528\u8D77\u6765\u66F4\u7B80\u6D01\u7684\u5907\u9009\u65B9\u6848\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Fetch \u662F\u57FA\u4E8E Promise \u7684\uFF0C\u6240\u4EE5\u7F16\u7801\u98CE\u683C\u4E0E\u5176\u4E00\u81F4\u3002\u6765\u770B\u770B\u5982\u4F55\u4F7F\u7528\u539F\u751F\u7684 Fetch API \u83B7\u53D6\u6570\u636E\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fetch('/api/getData', { method: 'GET' })\n .then(response => response.json() )\n .then(json => console.log(json) )\n .catch(err => alert(err.message) );\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u770B\u8D77\u6765\uFF0C",(0,i.jsx)(n.code,{children:"fetch"})," \u4F7F\u7528\u8D77\u6765\u8981\u7B80\u5355\u4E0D\u5C11\uFF0C\u5B83\u662F\u5728\u5BA2\u6237\u7AEF\u6784\u9020\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"Request"})," \u5BF9\u8C61\u53D1\u9001\u7ED9\u670D\u52A1\u5668\uFF0C\u7136\u540E\u670D\u52A1\u5668\u8FD4\u56DE\u4E00\u4E2A ",(0,i.jsx)(n.code,{children:"Response"})," \u5BF9\u8C61\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF1B\u800C\u4E14\u4E5F\u57FA\u4E8E Promise \u89E3\u51B3\u4E86\u56DE\u8C03\u5D4C\u5957\u7684\u95EE\u9898\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u4F7F\u7528 Fetch API \u7684\u8FC7\u7A0B\u4E2D\u4ECD\u7136\u8981\u6CE8\u610F\u4E00\u4E9B\u95EE\u9898\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"\u9ED8\u8BA4\u4E0D\u643A\u5E26-cookie",children:"\u9ED8\u8BA4\u4E0D\u643A\u5E26 Cookie"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["fetch \u53D1\u9001\u8BF7\u6C42\u9ED8\u8BA4\u662F\u4E0D\u643A\u5E26 Cookie \u4FE1\u606F\u7684\uFF0C\u4E0D\u7BA1\u662F\u540C\u57DF\u8FD8\u662F\u8DE8\u57DF\u8BF7\u6C42\uFF1B\u56E0\u6B64\uFF0C\u5728\u9700\u8981\u4F7F\u7528 Session-Cookie \u673A\u5236\u8FDB\u884C\u6743\u9650\u9A8C\u8BC1\u7684\u573A\u666F\u4E0B\uFF0C\u52A1\u5FC5\u914D\u7F6E ",(0,i.jsx)(n.code,{children:"credentials"})," \u9879"]}),"\uFF1A"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"omit"}),"\uFF1A\u9ED8\u8BA4\u503C\uFF0C\u8BF7\u6C42\u4E0D\u643A\u5E26 Cookie \u4FE1\u606F\uFF1B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"same-origin"}),"\uFF1A\u5141\u8BB8\u540C\u57DF\u8BF7\u6C42\u643A\u5E26 Cookie \u4FE1\u606F\uFF0C\u8DE8\u57DF\u8BF7\u6C42\u5219\u4E0D\u5141\u8BB8\uFF1B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"include"}),"\uFF1A\u540C\u57DF\u6216\u8DE8\u57DF\u8BF7\u6C42\u7686\u643A\u5E26 Cookie \u4FE1\u606F"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"exp\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fetch('/api/getData', { method: 'GET', credentials: 'same-origin' })\n .then(response => response.json() )\n .then(json => console.log(json) )\n .catch(err => alert(err.message) );\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u4EC5\u5728\u8BF7\u6C42\u4E0D\u80FD\u5B8C\u6210\u65F6-reject",children:"\u4EC5\u5728\u8BF7\u6C42\u4E0D\u80FD\u5B8C\u6210\u65F6 reject"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["\u56E0\u4E3A fetch \u662F\u57FA\u4E8E Promise \u7684\uFF0C\u800C\u670D\u52A1\u5668\u54CD\u5E94\u7684 ",(0,i.jsx)(n.code,{children:"Response"})," \u5BF9\u8C61\u4E2D\u5C01\u88C5\u7684\u4FE1\u606F\uFF08\u4F8B\u5982\u54CD\u5E94\u72B6\u6001\u7801 200\u3001403 \u7B49\uFF09\u4E0D\u4F1A\u4F5C\u4E3A reject \u7684\u6761\u4EF6\uFF0C\u800C\u662F\u4EC5\u5728\u5BA2\u6237\u7AEF\u4E0E\u670D\u52A1\u5668\u7AEF\u53D1\u751F\u7F51\u7EDC\u9519\u8BEF\u4E0D\u80FD\u987A\u5229\u5B8C\u6210\u8BF7\u6C42\u65F6\u624D\u4F1A ",(0,i.jsx)(n.code,{children:"reject"}),"\u3002"]})}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u4EE5\uFF0C\u8FD9\u5C31\u9700\u8981\u5728\u670D\u52A1\u5668\u8FD4\u56DE ",(0,i.jsx)(n.code,{children:"Response"})," \u5BF9\u8C61\u65F6\u6211\u4EEC\u505A\u4E00\u4E9B\u7B80\u5355\u7684\u68C0\u9A8C\u5DE5\u4F5C\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fetch('/api/getData', { method: 'GET' })\n .then(response => {\n  // check status\n  if(response.status === 200){\n   return response.json();\n  } else {\n   throw new Error(response.statusText);\n  }\n })\n .then(json => console.log(json) )\n .catch(err => alert(err.message) );\n"})}),"\n",(0,i.jsx)(n.h4,{id:"get-\u8BF7\u6C42",children:"GET \u8BF7\u6C42"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u53D1\u9001 Get \u8BF7\u6C42\u65F6\uFF0C\u53C2\u6570\u4E00\u822C\u5C31\u643A\u5E26\u5728 ",(0,i.jsx)(n.code,{children:"url"})," \u4E2D\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fetch('/api/getData?t=' + new Date().getTime(), { method: 'GET' })\n .then(response => response.json() )\n .then(json => console.log(json) )\n .catch(err => alert(err.message) );\n"})}),"\n",(0,i.jsx)(n.h4,{id:"post-\u8BF7\u6C42",children:"POST \u8BF7\u6C42"}),"\n",(0,i.jsxs)(n.p,{children:["**\u5728\u53D1\u9001 Post \u8BF7\u6C42\u65F6\uFF0C\u53C2\u6570\u53EA\u80FD\u643A\u5E26\u5728 ",(0,i.jsx)(n.code,{children:"body"})," \u4E2D\uFF0C\u800C\u4E14\u5373\u4FBF\u6CA1\u6709\u53C2\u6570\uFF0C",(0,i.jsx)(n.code,{children:"body"})," \u4E5F\u4E0D\u80FD\u4E3A\u7A7A\u3002**\u53C2\u6570\u901A\u5E38\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"FormData"})," \u5BF9\u8C61\u6765\u6784\u5EFA\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"let formData = new FormData();\nformData.append('username', 'mrwang');\nformData.append('password', '123456');\n\nfetch('/api/postData', {\n method: 'POST',\n body: formData\n})\n .then(response => response.json() )\n .then(json => console.log(json) )\n .catch(err => alert(err.message) );\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u66F4\u91CD\u8981\u7684\u662F\uFF0C\u73B0\u5728\uFF082018 \u5E74\uFF09\uFF0C",(0,i.jsx)(n.code,{children:"Fetch API"})," \u5DF2\u7ECF\u5728\u4E3B\u6D41\u6D4F\u89C8\u5668\u4E2D\u83B7\u5F97\u4E86\u5E7F\u6CDB\u7684\u652F\u6301\uFF0C\u6240\u4EE5\u4E0D\u7528\u592A\u62C5\u5FC3\u517C\u5BB9\u95EE\u9898\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u53C2\u8003",children:"\u53C2\u8003"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u300A\u4F60\u4E0D\u77E5\u9053\u7684 JavaScript\u300B\uFF08\u4E2D\u5377\uFF09\uFF0C[\u7F8E] Kyle Simpson\uFF0C\u5355\u4E1A \u59DC\u5357 \u8BD1"}),"\n"]})]})}function a(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453(e,n,r){r.d(n,{R:()=>l,x:()=>t});var s=r(96540);let i={},c=s.createContext(i);function l(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(c.Provider,{value:n},e.children)}},39112(e){e.exports=JSON.parse('{"permalink":"/computer-technology/web-frontend/javascript/web-js-async","editUrl":"https://github.com/wang1212/wang1212.github.io/tree/master/blog/computer-technology/web-frontend/javascript/web-js-async.md","source":"@site/blog/computer-technology/web-frontend/javascript/web-js-async.md","title":"JavaScript \u5F02\u6B65\u7F16\u7A0B","description":"JavaScript \u4F5C\u4E3A\u4E00\u95E8\u5728 Web \u5F00\u53D1\u4E2D\u7684\u4E3B\u6D41\u8BED\u8A00\uFF0C\u5E38\u5E38\u6D89\u53CA\u5230\u4EA4\u4E92\u4E8B\u4EF6\u65B9\u9762\u7684\u5E94\u7528\uFF0C\u8FD9\u4E0D\u53EF\u907F\u514D\u7684\u7528\u5230\u4E86\u5F02\u6B65\u7F16\u7A0B\u7684\u65B9\u6CD5\uFF0C\u800C\u5B83\u672C\u8EAB\u5219\u662F\u5355\u7EBF\u7A0B\u8FD0\u884C\u7684\u3002\u5728\u4EE5\u5F80\u7684\u5F00\u53D1\u4E2D\uFF0C\u5F02\u6B65\u7F16\u7A0B\u6B63\u53D8\u5F97\u8D8A\u6765\u8D8A\u96BE\u7BA1\u7406\uFF0C\u65B0\u7684 Promise \u6807\u51C6 API \u5C06\u4F7F\u5F97\u5F02\u6B65\u7F16\u7A0B\u66F4\u52A0\u65B9\u4FBF\u3001\u5B89\u5168\u3002","date":"2017-03-22T15:48:00.000Z","tags":[{"inline":true,"label":"\u8BA1\u7B97\u673A\u6280\u672F","permalink":"/tags/\u8BA1\u7B97\u673A\u6280\u672F"},{"inline":true,"label":"Web","permalink":"/tags/web"},{"inline":true,"label":"Web \u524D\u7AEF","permalink":"/tags/web-\u524D\u7AEF"},{"inline":true,"label":"JavaScript","permalink":"/tags/java-script"},{"inline":true,"label":"\u5F02\u6B65\u7F16\u7A0B","permalink":"/tags/\u5F02\u6B65\u7F16\u7A0B"}],"readingTime":13.64,"hasTruncateMarker":true,"authors":[{"name":"\u4E0D\u5982\u6000\u5FF5","title":"Web \u524D\u7AEF\u5DE5\u7A0B\u5E08 (Web Front-end Engineer)","url":"https://github.com/wang1212","email":"mrwang1212@126.com","socials":{"github":"https://github.com/wang1212","x":"https://x.com/wang1212x","reddit":"https://www.reddit.com/user/Warm_Salt_2251","rednote":"https://www.xiaohongshu.com/user/profile/5e4130cb00000000010023fd"},"imageURL":"/img/authors/wang1212.png","key":"wang1212","page":null}],"frontMatter":{"title":"JavaScript \u5F02\u6B65\u7F16\u7A0B","date":"2017-03-22T15:48:00.000Z","update":"2018-06-03T13:46:00.000Z","authors":"wang1212","tags":["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","JavaScript","\u5F02\u6B65\u7F16\u7A0B"],"keywords":["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","JavaScript","\u5F02\u6B65\u7F16\u7A0B"],"description":"JavaScript \u4F5C\u4E3A\u4E00\u95E8\u5728 Web \u5F00\u53D1\u4E2D\u7684\u4E3B\u6D41\u8BED\u8A00\uFF0C\u5E38\u5E38\u6D89\u53CA\u5230\u4EA4\u4E92\u4E8B\u4EF6\u65B9\u9762\u7684\u5E94\u7528\uFF0C\u8FD9\u4E0D\u53EF\u907F\u514D\u7684\u7528\u5230\u4E86\u5F02\u6B65\u7F16\u7A0B\u7684\u65B9\u6CD5\uFF0C\u800C\u5B83\u672C\u8EAB\u5219\u662F\u5355\u7EBF\u7A0B\u8FD0\u884C\u7684\u3002\u5728\u4EE5\u5F80\u7684\u5F00\u53D1\u4E2D\uFF0C\u5F02\u6B65\u7F16\u7A0B\u6B63\u53D8\u5F97\u8D8A\u6765\u8D8A\u96BE\u7BA1\u7406\uFF0C\u65B0\u7684 Promise \u6807\u51C6 API \u5C06\u4F7F\u5F97\u5F02\u6B65\u7F16\u7A0B\u66F4\u52A0\u65B9\u4FBF\u3001\u5B89\u5168\u3002"},"unlisted":false,"prevItem":{"title":"JSP \u5185\u7F6E\u5BF9\u8C61\u3001\u6307\u4EE4\u4E0E\u52A8\u4F5C","permalink":"/computer-technology/java-web/web-java-jsp"},"nextItem":{"title":"\u4F7F\u7528 Git","permalink":"/computer-technology/tools/tools-git"}}')}}]);