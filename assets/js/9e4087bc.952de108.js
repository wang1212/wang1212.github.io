"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["47293"],{74929:function(t,e,a){a.r(e),a.d(e,{default:()=>k});var n=a(85893),r=a(67294),l=a(3379),s=a(59152);let o={word:"word_GzE5","tag-list":"tag-list_KMlQ",hero:"hero__Fwa"};var i=a(53708),d=a(57277),c=a.n(d);function u(t){let{tagList:e,onTagClick:l}=t;return(0,r.useEffect)(()=>{let t=a(85083),n=document.getElementById("wordcloud");if(!n)return;let r={list:e.filter(t=>t[1]>1),classes:o.word,backgroundColor:"transparent",shape:"square",weightFactor:2,rotateRatio:.5,rotationSteps:2,fontFamily:"Impact",color:"random-light",gridSize:Math.round(24*n.getBoundingClientRect().width/1024),shrinkToFit:!0,click(t){l(t[0])}},s=setTimeout(()=>{t(n,r)},0);return()=>{clearTimeout(s),t.stop()}},[e,l]),(0,n.jsx)("section",{children:(0,n.jsx)("div",{id:"wordcloud",style:{width:"100%",height:"400px"}})})}function g(t){let{tagList:e,currentTag:a,onTagClick:r}=t;return(0,n.jsx)("section",{children:(0,n.jsx)("ul",{className:o["tag-list"],children:e.slice().sort((t,e)=>e[1]-t[1]).map(t=>(0,n.jsxs)("li",{className:`button button--sm button--outline button--secondary ${a===t[0]?"button--active":""}`,onClick:()=>r(t[0]),children:[t[0]," ",t[1]>1&&t[1]]},t[0]))})})}function h(t){let{calendarData:e,calendarYear:a,currentDate:l,onDateClick:s}=t,[o,i]=(0,r.useState)({visible:!1,x:0,y:0,content:""}),d=Array.from(Array(12),(t,e)=>`${e+1}\u{6708}`),u=new Map;e.forEach(t=>{let{date:e,count:a}=t;u.set(e,a)});let g=()=>{i(t=>({...t,visible:!1}))};return(0,n.jsxs)("section",{className:"margin-vert--lg",children:[(0,n.jsx)("div",{onClick:g,children:(0,n.jsx)(c(),{startDate:new Date(`${a-1}-12-31`),endDate:new Date(`${a}-12-31`),monthLabels:d,weekdayLabels:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],classForValue:t=>{if(!t||!t.date)return"color-empty";let e="";return e=t.count&&t.count<=4?`color-github-${t.count}`:t.count?"color-github-4":"color-empty",l&&t.date===l&&(e+=" color-github-selected"),e},values:e,titleForValue:()=>"",onMouseOver:(t,e)=>{if(!e)return;t.preventDefault(),t.stopPropagation();let a=t.currentTarget.getBoundingClientRect(),n=a.left+a.width/2,r=a.top-10,l=new Date(e.date),s=l.getFullYear(),o=String(l.getMonth()+1).padStart(2,"0"),d=String(l.getDate()).padStart(2,"0"),c=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"][l.getDay()],u=function(t){let e=new Date(t.getFullYear(),0,0);return Math.floor((t.getTime()-e.getTime())/864e5)}(l),g=e.count||0;i({visible:!0,x:n,y:r,content:`${s}-${o}-${d} \u{5468}${c}
\u{4ECA}\u{5E74}\u{7B2C}${u}\u{5929}
\u{6709}${g}\u{6761}\u{6D3B}\u{52A8}\u{8BB0}\u{5F55}`})},onMouseLeave:g,onClick:t=>{t&&t.date&&s(l===t.date?null:t.date)}})}),o.visible&&(0,n.jsxs)("div",{style:{position:"fixed",left:`${o.x}px`,top:`${o.y}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",borderRadius:"4px",fontSize:"13px",zIndex:1e3,pointerEvents:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",transform:"translateX(-50%) translateY(-100%)",whiteSpace:"pre",maxWidth:"180px",textAlign:"left",lineHeight:"1.5",padding:"8px 12px"},children:[o.content.split("\n").map((t,e)=>(0,n.jsx)("div",{children:t},e)),(0,n.jsx)("div",{style:{position:"absolute",bottom:"-4px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"4px solid rgba(0, 0, 0, 0.85)"}})]})]})}function m(t){let{tagList:e,currentTag:a,onTagClick:l,calendarData:s,calendarYear:o,availableYears:i,onYearChange:d,currentDate:c,onDateClick:m,initialMode:p="activityCalendar"}=t,[x,f]=(0,r.useState)(p);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"margin-bottom--md",style:{display:"flex",gap:"8px"},children:[(0,n.jsxs)("div",{className:"dropdown dropdown--hoverable",children:[(0,n.jsx)("button",{className:"button button--primary",children:"tagCloud"===x?"\u6807\u7B7E\u4E91":"tagList"===x?"\u6807\u7B7E\u5217\u8868":"\u6D3B\u52A8\u65E5\u5386"}),(0,n.jsxs)("ul",{className:"dropdown__menu",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:`dropdown__link ${"activityCalendar"===x?"dropdown__link--active":""}`,onClick:()=>f("activityCalendar"),children:"\u6D3B\u52A8\u65E5\u5386"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:`dropdown__link ${"tagCloud"===x?"dropdown__link--active":""}`,onClick:()=>f("tagCloud"),children:"\u6807\u7B7E\u4E91"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:`dropdown__link ${"tagList"===x?"dropdown__link--active":""}`,onClick:()=>f("tagList"),children:"\u6807\u7B7E\u5217\u8868"})})]})]}),"activityCalendar"===x&&(0,n.jsxs)("div",{className:"dropdown dropdown--hoverable",children:[(0,n.jsxs)("button",{className:"button button--outline button--secondary",children:[o,"\u5E74"]}),(0,n.jsx)("ul",{className:"dropdown__menu",children:i.map(t=>(0,n.jsx)("li",{children:(0,n.jsxs)("a",{className:`dropdown__link ${o===t?"dropdown__link--active":""}`,href:"#",onClick:e=>{e.preventDefault(),d(t)},children:[t,"\u5E74"]})},t))})]})]}),(0,n.jsxs)("div",{children:["tagCloud"===x&&(0,n.jsx)(u,{tagList:e,onTagClick:t=>{l(t),m(null)}}),"tagList"===x&&(0,n.jsx)(g,{tagList:e,currentTag:a,onTagClick:t=>{l(t),m(null)}}),"activityCalendar"===x&&(0,n.jsx)(h,{calendarData:s,calendarYear:o,currentDate:c,onDateClick:t=>{m(t)}})]})]})}var p=a(67026),x=a(80647);function f(t){let{post:e}=t;return(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:e.metadata.permalink,children:(0,n.jsx)("div",{children:e.metadata.title})}),(0,n.jsxs)("div",{style:{opacity:.5},children:[(0,n.jsxs)("small",{children:["\u53D1\u5E03\u4E8E ",(0,x.ti)(e.metadata.frontMatter.date)]})," ",e.metadata.frontMatter.update!==e.metadata.frontMatter.date?(0,n.jsxs)("small",{children:["\u6700\u540E\u66F4\u65B0\u4E8E"," ",(0,x.ti)(e.metadata.frontMatter.update)]}):""]})]})}function b(t){let{year:e,month:a,posts:r}=t,[l]=(0,i.u)();return(0,n.jsxs)("section",{className:"_js-month",children:[(0,n.jsxs)("h4",{children:[(0,n.jsx)("small",{style:{color:"var(--ifm-color-secondary)"},children:e})," ",a," \u6708"]}),(0,n.jsx)("ul",{ref:l,children:r.map(t=>(0,n.jsx)(f,{post:t},t.metadata.permalink))})]})}function w(t){let{year:e,posts:a,sortBy:l}=t,[s,o]=r.useState(a.length<=10),[d]=(0,i.u)(),c=t=>Array.from(t.reduceRight((t,e)=>{let a=e.metadata.frontMatter[l].split("-")[1],n=t.get(a)??[];return t.set(a,[e,...n])},new Map),t=>{let[e,a]=t;return{month:e,posts:a.sort((t,e)=>new Date(e.metadata.frontMatter[l]).getTime()-new Date(t.metadata.frontMatter[l]).getTime())}}).sort((t,e)=>Number(e.month)-Number(t.month)),u=c(a).flatMap(t=>t.posts),g=c(s?u:u.slice(0,10));return(0,n.jsxs)("section",{className:"_js-year col col--4 margin-bottom--lg",children:[(0,n.jsxs)("h3",{children:[e," \u5E74"]}),(0,n.jsx)("div",{ref:d,children:g.map(t=>(0,n.jsx)(b,{year:e,...t},t.month))}),a.length>10&&(0,n.jsx)("button",{className:"button button--sm button--outline button--primary margin-top--md",onClick:()=>o(!s),children:s?"\u6536\u8D77\u90E8\u5206\u6587\u7AE0":`\u{5C55}\u{5F00}\u{5176}\u{4F59} ${a.length-10} \u{7BC7}...`})]})}let j=t=>{let e=new Date(t.getFullYear(),0,0);return Math.floor((t.getTime()-e.getTime())/864e5)},v=t=>{let e=new Date(t),a=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),l=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"][e.getDay()],s=j(e);return`${a}-${n}-${r} \u{5468}${l} \u{7B2C}${s}\u{5929}`};function y(t){let{years:e,sortBy:a,tag:r,selectedDate:l,updateSortBy:s,onTagClick:o,onDateClick:d,loadMoreRef:c,hasMore:u,totalPosts:g}=t,[h]=(0,i.u)();return 0===e.length?null:(0,n.jsx)("section",{className:"margin-bottom--lg",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("nav",{className:"margin-bottom--md",style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,n.jsx)("button",{title:"\u6309\u53D1\u5E03\u65F6\u95F4\u6392\u5E8F",className:(0,p.Z)("button button--sm button--primary","date"!==a&&"button--outline","margin-right--sm"),onClick:()=>s("date"),children:"\u53D1\u5E03\u65F6\u95F4"}),(0,n.jsx)("button",{title:"\u6309\u66F4\u65B0\u65F6\u95F4\u6392\u5E8F",className:(0,p.Z)("button button--sm button--primary","update"!==a&&"button--outline"),onClick:()=>s("update"),children:"\u66F4\u65B0\u65F6\u95F4"}),(0,n.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px",alignItems:"center"},children:[(0,n.jsx)("span",{className:"badge badge--secondary",children:`${g} \u{7BC7}`}),r&&(0,n.jsxs)("span",{className:"badge badge--secondary",style:{cursor:"pointer"},onClick:t=>{t.preventDefault(),o?.(null)},title:"\u70B9\u51FB\u6E05\u9664\u6807\u7B7E\u7B5B\u9009",children:[r," \xd7"]}),l&&(0,n.jsxs)("span",{className:"badge badge--secondary",style:{cursor:"pointer"},onClick:t=>{t.preventDefault(),d?.(null)},title:"\u70B9\u51FB\u6E05\u9664\u65E5\u671F\u7B5B\u9009",children:[v(l)," \xd7"]})]})]}),(0,n.jsx)("div",{ref:h,className:"row",children:e.map(t=>(0,n.jsx)(w,{...t},t.year))}),u&&(0,n.jsx)("div",{ref:c,className:"margin-vert--lg",style:{textAlign:"center"},children:"\u52A0\u8F7D\u66F4\u591A..."})]})})}let S=["\u4EBA\u4E0D\u5E94\u8BE5\u662F\u63D2\u5728\u82B1\u74F6\u91CC\u4F9B\u4EBA\u89C2\u8D4F\u7684\u9759\u7269\uFF0C\u800C\u662F\u8513\u5EF6\u5728\u8349\u539F\u4E0A\u968F\u98CE\u8D77\u821E\u7684\u97F5\u5F8B\u3002\u751F\u547D\u4E0D\u662F\u5B89\u6392\uFF0C\u800C\u662F\u8FFD\u6C42\uFF0C\u4EBA\u751F\u7684\u610F\u4E49\u4E5F\u8BB8\u6C38\u8FDC\u6CA1\u6709\u7B54\u6848\uFF0C\u4F46\u4E5F\u8981\u5C3D\u60C5\u611F\u53D7\u8FD9\u79CD\u6CA1\u6709\u7B54\u6848\u7684\u4EBA\u751F\u3002","\u5176\u5B9E\u6211\u4EEC\u6BCF\u4E2A\u4EBA\u7684\u751F\u6D3B\u90FD\u662F\u4E00\u4E2A\u4E16\u754C\uFF0C\u5373\u4F7F\u6700\u5E73\u51E1\u7684\u4EBA\u4E5F\u8981\u4E3A\u4ED6\u751F\u6D3B\u7684\u90A3\u4E2A\u4E16\u754C\u800C\u594B\u6597\u3002","\u4EBA\u4E00\u8F88\u5B50\u6700\u73CD\u8D35\u7684\u54C1\u8D28\u5176\u5B9E\u5C31\u4E24\u6837\uFF1A\u4E00\u4E2A\u662F\u70ED\u8840\uFF0C\u4E00\u4E2A\u662F\u5929\u771F\u3002","\u4F60\u4E0D\u80FD\u56E0\u4E3A\u81EA\u5DF1\u53D8\u6210\u4E86\u4E0D\u75DB\u4E0D\u75D2\u7684\u4EBA\uFF0C\u5C31\u53BB\u5632\u7B11\u90A3\u4E9B\u7231\u6068\u5206\u660E\u7684\u4EBA\u3002","\u5C0A\u91CD\u90A3\u4E9B\u4E0E\u4F60\u6297\u4E89\u7684\u4EBA\uFF0C\u56E0\u4E3A\u4F60\u4E89\u7684\u662F\u7406\uFF0C\u4E0D\u662F\u53BB\u635F\u6BC1\u5BF9\u65B9\u7684\u4EBA\u683C\u3002","\u68A6\u60F3\u8FD9\u4E1C\u897F\u4E0E\u7ECF\u5178\u4E00\u6837\uFF0C\u6C38\u8FDC\u4E0D\u4F1A\u56E0\u65F6\u95F4\u800C\u892A\u8272\uFF0C\u53CD\u800C\u66F4\u663E\u73CD\u8D35\u3002","\u6211\u4EEC\u8D70\u8FC7\u7684\u6BCF\u4E00\u6B65\u4E0D\u4E00\u5B9A\u662F\u5B8C\u7F8E\u7684\uFF0C\u4F46\u6BCF\u4E00\u6B65\u90FD\u6709\u503C\u5F97\u6DF1\u601D\u7684\u610F\u4E49\u3002","\u505A\u751F\u6D3B\u7684\u5BFC\u6F14\uFF0C\u4E0D\u6210\uFF1B\u6B21\u4E4B\uFF0C\u505A\u6F14\u5458\uFF1B\u518D\u6B21\u4E4B\uFF0C\u505A\u89C2\u4F17\u3002","\u8F6F\u4EF6\u53EA\u662F\u4E00\u79CD\u5E2E\u52A9\u4EBA\u4EEC\u5B8C\u6210\u67D0\u4E9B\u4E8B\u60C5\u7684\u5DE5\u5177\u2014\u2014\u8BB8\u591A\u7A0B\u5E8F\u5458\u4ECE\u6765\u4E0D\u7406\u89E3\u8FD9\u4E00\u70B9\u3002\u5173\u6CE8\u4EA4\u4ED8\u7684\u4EF7\u503C\uFF0C\u4E0D\u8981\u8FC7\u5206\u5173\u6CE8\u5DE5\u5177\u7684\u7EC6\u8282 - John Carmack",'const res = ["\uD83D\uDC68", "\u200D", "\uD83D\uDC69", "\u200D", "\uD83D\uDC67", "\u200D", "\uD83D\uDC66"].join(\'\'); console.log(res);'],C="\u5C81\u6708\u7559\u75D5",D=()=>S[Math.floor(Math.random()*S.length)];function k(t){let[e]=(0,r.useState)(D()),[a,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),g=new Date().getFullYear();Array.from({length:5},(t,e)=>g-e);let[h,p]=(0,r.useState)("update"),x=(0,r.useCallback)(t=>{let e=new Set;return t.forEach(t=>{let a=t.metadata.frontMatter.update||t.metadata.frontMatter.date;if(a){let t=new Date(a);isNaN(t.getTime())||e.add(t.getFullYear())}}),Array.from(e).sort((t,e)=>e-t)},[]),f=x(t.archive.blogPosts),[b,w]=(0,r.useState)(f[0]||new Date().getFullYear()),j=t=>{let e=new Date(t),a=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${a}-${n}-${r}`},v=(0,r.useCallback)(()=>{let e=[],a=new Map;return t.archive.blogPosts.forEach(t=>{let{date:e,update:n}=t.metadata.frontMatter,r=new Set;[e,n].forEach(t=>{if(!t||"Invalid Date"===new Date(t).toString())return;let e=j(t);r.has(e)||(a.set(e,(a.get(e)||0)+1),r.add(e))})}),a.forEach((t,a)=>{e.push({date:a,count:t})}),e},[t.archive.blogPosts])(),[S,k]=(0,r.useState)([]),[N,$]=(0,r.useState)([]),[M,_]=(0,r.useState)(1),T=(0,r.useRef)(null),[F]=(0,i.u)(),[E,L]=(0,r.useState)(0),Y=Array.from(function(t){let e=new Map;return t.forEach(t=>{(t.metadata.tags||[]).forEach(t=>{let a=e.get(t.label);e.has(t.label)||(a={item:t,count:0}),a.count++,e.set(t.label,a)})}),e}(t.archive.blogPosts),t=>{let[e,a]=t;return[e,a.count]}),P=(0,r.useCallback)((t,e)=>{e&&(e.preventDefault(),e.stopPropagation());let n=a===t?null:t;d(n),u(null);let r=new URLSearchParams(window.location.search);n?r.set("tag",n):r.delete("tag"),r.delete("date");let l=`${window.location.pathname}${r.toString()?"?"+r.toString():""}`;window.history.replaceState({tag:n,date:null},"",l)},[a]),B=(0,r.useCallback)((t,e)=>{if(e&&(e.preventDefault(),e.stopPropagation()),!t){u(null);let t=new URLSearchParams(window.location.search);t.delete("date");let e=`${window.location.pathname}${t.toString()?"?"+t.toString():""}`;window.history.replaceState({tag:a,date:null},"",e);return}d(null),u(t);let n=new URLSearchParams(window.location.search);n.set("date",t),n.delete("tag");let r=`${window.location.pathname}${n.toString()?"?"+n.toString():""}`;window.history.replaceState({tag:null,date:t},"",r)},[a]);(0,r.useEffect)(()=>{let t=new URLSearchParams(window.location.search),e=t.get("tag"),a=t.get("date");e?(d(e),u(null)):a?(u(a),d(null)):(d(window.history?.state?.tag||null),u(window.history?.state?.date||null));let n=t=>{t.state&&(d(t.state.tag||null),u(t.state.date||null))};return window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}},[]),(0,r.useEffect)(()=>{let e=[...t.archive.blogPosts];a?e=e.filter(t=>t.metadata.frontMatter.tags.includes(a)):c&&(e=e.filter(t=>{let e=t.metadata.frontMatter.date,a=t.metadata.frontMatter.update;return j(e)===c||a&&j(a)===c})),L(e.length);let n=Array.from(e.reduceRight((t,e)=>{let a=e.metadata.frontMatter[h].split("-")[0],n=t.get(a)??[];return t.set(a,[...n,e])},new Map),t=>{let[e,a]=t;return{year:e,posts:a,sortBy:h}}).sort((t,e)=>Number(e.year)-Number(t.year));k(n),$(n.slice(0,3)),_(1);let r=x(e);w(t=>r.includes(t)?t:r[0]||new Date().getFullYear())},[a,c,h,t.archive.blogPosts,x]);let R=(0,r.useCallback)(()=>{_(t=>{let e=t+1;return $(S.slice(0,3*e)),e})},[S]);return(0,r.useEffect)(()=>{let t=new IntersectionObserver(t=>{t[0].isIntersecting&&N.length<S.length&&R()},{rootMargin:"200px"}),e=T.current;return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[N,S,R]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{title:C,description:e,children:[(0,n.jsx)(s.Z,{}),(0,n.jsx)("header",{className:`${o.hero} hero hero--primary`,children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("h1",{className:"hero__title",children:C}),(0,n.jsx)("p",{className:"hero__subtitle",children:e})]})}),(0,n.jsx)("main",{children:t.archive.blogPosts.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("section",{className:"margin-vert--lg",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{ref:F,children:(0,n.jsx)(m,{tagList:Y,currentTag:a,onTagClick:P,calendarData:v,calendarYear:b,availableYears:f,onYearChange:w,currentDate:c,onDateClick:B})}),(0,n.jsx)("hr",{className:"margin-vert--lg",style:{opacity:.25}})]})}),(0,n.jsx)(y,{years:N,sortBy:h,updateSortBy:p,tag:a,selectedDate:c,onTagClick:P,onDateClick:B,loadMoreRef:T,hasMore:S.length>N.length,totalPosts:E})]}):""})]})})}},80647:function(t,e,a){function n(t){let e=new Date(t.getFullYear(),0,0);return Math.floor((t.getTime()-e.getTime())/864e5)}function r(t){return t.split(/[^\d]+/).slice(0,3).map(t=>t.padStart(2,"0")).join("-")}function l(t){let e=new Date(t),a=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),l=String(e.getUTCHours()).padStart(2,"0"),s=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0");return`${a}-${n}-${r} ${l}:${s}:${o}`}a.d(e,{cz:()=>l,ti:()=>r,vz:()=>n})}}]);