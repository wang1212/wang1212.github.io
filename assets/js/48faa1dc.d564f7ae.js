"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([["53430"],{34597:function(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>d});var s=n(79194),r=n(85893),i=n(50065);let c={title:"Web \u5E94\u7528\uFF1A\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u5DE5\u5177 zustand",date:new Date("2021-11-18T00:14:00.000Z"),update:new Date("2021-11-18T00:14:00.000Z"),authors:"wang1212",tags:["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","\u5E94\u7528\u72B6\u6001\u7BA1\u7406","React.js","\u6E90\u7801\u89E3\u6790"],keywords:["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","\u5E94\u7528\u72B6\u6001\u7BA1\u7406","React.js","\u6E90\u7801\u89E3\u6790"],description:"Web \u7F51\u9875\u5411 Web \u5E94\u7528\u53D1\u5C55\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u52BF\u5FC5\u4F1A\u51FA\u73B0 Web \u9879\u76EE\u7684\u590D\u6742\u5316\u95EE\u9898\uFF0C\u800C\u5728\u79FB\u52A8\u7AEF\u573A\u666F\uFF0C\u57FA\u4E8E React.js \u7684\u5E94\u7528\u4E2D\u5982\u4F55\u7BA1\u7406\u72B6\u6001\uFF1Fzustand \u4E5F\u8BB8\u503C\u5F97\u4E00\u8BD5\u3002"},l=void 0,a={authorsImageUrls:[void 0]},d=[{value:"\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u65B9\u6848",id:"\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u65B9\u6848",level:2},{value:"redux vs zustand",id:"redux-vs-zustand",level:2},{value:"<code>subscribe()</code>",id:"subscribe",level:3},{value:"<code>setState()</code> &amp;&amp; <code>dispatch()</code>",id:"setstate--dispatch",level:3},{value:"React.js \u9002\u914D",id:"reactjs-\u9002\u914D",level:3},{value:"\u8C03\u5F0F\u5DE5\u5177",id:"\u8C03\u5F0F\u5DE5\u5177",level:3},{value:"\u7ED3\u8BED",id:"\u7ED3\u8BED",level:2},{value:"\u53C2\u8003",id:"\u53C2\u8003",level:2}];function o(e){let t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["\u57FA\u4E8E React.js \u7684 Web \u5E94\u7528\u5982\u4F55\u5B8C\u6210\u72B6\u6001\u7BA1\u7406\uFF1F\u793E\u533A\u4E3B\u6D41\u65B9\u6848\u662F ",(0,r.jsx)(t.strong,{children:"react-redux"}),"\uFF0C\u5176\u672C\u8D28\u4E0A\u57FA\u4E8E React \u7684 ",(0,r.jsx)(t.code,{children:"Context"})," \u7279\u6027\u5B9E\u73B0\uFF0C\u5982\u679C\u5E94\u7528\u8DB3\u591F\u7B80\u5355\uFF0C\u5B9E\u9645\u4E0A\u7528 ",(0,r.jsx)(t.code,{children:"Context"})," \u624B\u5199\u4E00\u4E2A\u7B80\u5355\u7684\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\u5012\u4E5F\u5E76\u4E0D\u96BE\u3002\u4E0D\u8FC7\uFF0C\u8003\u8651\u5230\u5DE5\u5177\u7684\u5B8C\u5584\u6027\u3001\u9879\u76EE\u7684\u5065\u58EE\u6027\uFF0C\u901A\u5E38\u91C7\u7528\u8F83\u597D\u7684\u3001\u6210\u719F\u7684\u793E\u533A\u65B9\u6848\u3002\u5728\u79FB\u52A8\u7AEF\u573A\u666F\u4E0B\uFF0C",(0,r.jsx)(t.strong,{children:"react-redux"})," \u7565\u663E\u81C3\u80BF\uFF0C\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u5DE5\u5177 ",(0,r.jsx)(t.strong,{children:"zustand"})," \u5012\u662F\u4E00\u4E2A\u4E0D\u9519\u7684\u66FF\u4EE3\u65B9\u6848\u3002"]}),"\n",(0,r.jsx)(t.h2,{id:"\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u65B9\u6848",children:"\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u65B9\u6848"}),"\n",(0,r.jsxs)(t.p,{children:["Web \u4F18\u5316\u4E2D\uFF0C\u8D44\u6E90\u5927\u5C0F\u7684\u4F18\u5316\u662F\u91CD\u4E2D\u4E4B\u91CD\uFF0C\u800C\u4E14\u4E5F\u662F\u6210\u672C\u6700\u4F4E\uFF0C\u6536\u76CA\u6700\u9AD8\u7684\u4F18\u5316\u65B9\u5F0F\uFF0C\u5728\u79FB\u52A8\u7AEF\u573A\u666F\u4E0B\u5C24\u4E3A\u7A81\u51FA\u3002\u6BCF\u5728\u9879\u76EE\u4E2D\u5F15\u5165\u4E00\u4E2A\u5DE5\u5177\u5E93\uFF0C\u90FD\u8981\u8003\u8651\u662F\u5426\u6709\u66F4\u8F7B\u91CF\u7EA7\u7684\u66FF\u4EE3\u54C1\u3002\u4F17\u6240\u5468\u77E5\uFF0C",(0,r.jsx)(t.strong,{children:"moment"})," \u5C31\u662F\u4E00\u4E2A\u5178\u578B\u7684\u4F8B\u5B50\uFF0C\u6211\u901A\u5E38\u91C7\u7528 ",(0,r.jsx)(t.strong,{children:"dayjs"})," \u4F5C\u4E3A\u66FF\u4EE3\u65B9\u6848\u3002\u800C\u5728\u5E94\u7528\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\u7684\u9009\u62E9\u4E2D\uFF0C\u53EF\u4EE5\u5229\u7528 Bundlephobia \u9996\u5148\u8BC4\u4F30\u4E00\u4E0B\u793E\u533A\u4E3B\u6D41\u65B9\u6848 ",(0,r.jsx)(t.strong,{children:"react-redux"}),"\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED + GZIPPED"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/redux@4.1.2",children:"redux@4.1.2"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"4.3kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"1.6kB"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/react-redux@7.2.6",children:"react-redux@7.2.6"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"16.2kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"5.4kB"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"20.5kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"7kB"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["\u4EC5\u5FC5\u987B\u7684\u4F9D\u8D56\u5C31\u9700\u8981 ",(0,r.jsx)(t.strong,{children:"7kb"})," \u4E4B\u591A\uFF0C\u800C\u6211\u4EEC\u4E5F\u77E5\u9053\uFF0Credux \u4E0D\u4EC5\u662F\u4E00\u4E2A\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\uFF0C\u5176\u540C\u65F6\u4E5F\u63D0\u5021\u4E00\u79CD\u4F18\u79C0\u7684\u6A21\u5F0F\uFF0C\u5373\u6211\u4EEC\u719F\u77E5\u7684\uFF1A"]}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"Store -> Dispatch -> Action -> Reducer -> Store"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["\u800C\u8FD9\u79CD\u6A21\u5F0F\u9700\u8981\u6211\u4EEC\u624B\u5199\u5927\u91CF\u7684\u6A21\u677F\u4EE3\u7801\uFF0C\u4E8E\u662F\u5C31\u6709\u4E86\u5B98\u65B9\u89E3\u51B3\u65B9\u6848 ",(0,r.jsx)(t.strong,{children:"@reduxjs/toolkit"})," \u548C\u793E\u533A\u65B9\u6848 ",(0,r.jsx)(t.strong,{children:"@rematch/core"}),"\uFF0C\u8FD9\u8FDB\u4E00\u6B65\u52A0\u5267\u4E86\u8D44\u6E90\u5927\u5C0F\u6240\u5E26\u6765\u7684\u5F71\u54CD\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"}}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED + GZIPPED"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/@reduxjs/toolkit@1.6.2",children:"@reduxjs/toolkit@1.6.2"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"32.1kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"10.5kB"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/@rematch/core@2.2.0",children:"@rematch/core@2.2.0"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"4.7kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"1.7kB"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["\u7ECF\u8FC7\u5206\u6790\uFF0C\u4E8B\u5B9E\u4E0A\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 redux \u7684\u6838\u5FC3\u4EE3\u7801\u5E93\u4EC5\u6709 ",(0,r.jsx)(t.strong,{children:"1.6kb"})," \u7684\u5927\u5C0F\uFF0C\u4F46\u4E3A\u4E86\u9002\u914D React.js \u548C\u89E3\u51B3\u6A21\u677F\u4EE3\u7801\u7684\u95EE\u9898\uFF0C\u81F3\u5C11\u4E5F\u8981\u589E\u52A0 ",(0,r.jsx)(t.strong,{children:"7.1kb"})," \u7684\u8D44\u6E90\u5927\u5C0F\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u72B6\u6001\u7BA1\u7406\u5DE5\u5177\u7684\u6838\u5FC3\u5B9E\u73B0\u5176\u5B9E\u662F\u6BD4\u8F83\u7B80\u5355\u7684\uFF0C\u8FD9\u4E5F\u662F\u6838\u5FC3\u5E93\u8F83\u5C0F\u7684\u539F\u56E0\uFF0C\u800C\u5728\u79FB\u52A8\u7AEF\u573A\u666F\u4E0B\uFF0C\u9879\u76EE\u4E00\u822C\u8F83\u4E3A\u7B80\u5355\u3001\u89C4\u6A21\u8F83\u5C0F\uFF0C\u5BF9\u4E8E\u5DE5\u5177\u7684\u6838\u5FC3\u9700\u6C42\u5176\u5B9E\u4E5F\u4EC5\u4EC5\u662F\u6EE1\u8DB3\u5E94\u7528\u72B6\u6001\u7BA1\u7406\u5373\u53EF\u3002\u4E8E\u662F\uFF0C",(0,r.jsx)(t.strong,{children:"zustand"})," \u793E\u533A\u65B9\u6848\u6210\u4E3A\u4E86\u6211\u7684\u4E00\u4E2A\u9009\u62E9\u3002"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"}}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"MINIFIED + GZIPPED"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/zustand@3.6.5",children:"zustand@3.6.5"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"954B"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.a,{href:"https://bundlephobia.com/package/jotai@1.4.3",children:"jotai@1.4.3"})}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"6.1kB"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2.5kB"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["\u4E0A\u8868\u4E2D\uFF0C\u8FD8\u5217\u51FA\u4E86 jotai\uFF0C\u5B83\u4E0E zustand \u51FA\u81EA\u540C\u4E00\u4E2A\u5F00\u53D1\u8005\u7FA4\u4F53\u4E4B\u624B\uFF0C\u524D\u8005\u4EC5\u9002\u7528\u4E8E React.js \u7EC4\u4EF6\u5185\u7684\u72B6\u6001\u7BA1\u7406\uFF0C\u800C\u540E\u8005\u8FD8\u9002\u7528\u4E8E\u7EC4\u4EF6\u4E4B\u5916\u7684\u72B6\u6001\u64CD\u4F5C\u3002",(0,r.jsx)(t.strong,{children:"zustand"})," \u8DB3\u591F\u7B80\u5355\uFF0C\u4E14\u65E0\u9700\u592A\u591A\u6A21\u677F\u4EE3\u7801\uFF0C\u4EC5 ",(0,r.jsx)(t.strong,{children:"954B"})," \u5927\u5C0F\u5373\u53EF\u6EE1\u8DB3\u5E94\u7528\u72B6\u6001\u7BA1\u7406\u7684\u6838\u5FC3\u9700\u6C42\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u81F3\u6B64\uFF0C\u79FB\u52A8\u7AEF\u573A\u666F\u4E0B\uFF0C\u8981\u66FF\u4EE3 react-redux \u8FD9\u79CD\u4E3B\u6D41\u65B9\u6848\uFF0C\u8003\u8651\u4EE5\u4E0B\u51E0\u70B9\uFF1A"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"\u6EE1\u8DB3\u5E94\u7528\u72B6\u6001\u7BA1\u7406\u7684\u6838\u5FC3\u9700\u6C42"}),"\n",(0,r.jsx)(t.li,{children:"\u5177\u5907\u8D44\u6E90\u5927\u5C0F\u4F18\u52BF"}),"\n",(0,r.jsx)(t.li,{children:"\u7528\u6CD5\u8DB3\u591F\u7B80\u5355"}),"\n",(0,r.jsx)(t.li,{children:"\u65B9\u6848\u6210\u719F\uFF08\u8F83\u591A\u4EBA\u91C7\u7528\u3001\u6709\u914D\u5957\u7684\u8C03\u8BD5\u5DE5\u5177\u7B49\uFF09"}),"\n",(0,r.jsx)(t.li,{children:"\u53EF\u5728\u7EC4\u4EF6\u5916\u64CD\u4F5C\u72B6\u6001"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"\u5176\u4E2D\uFF0C\u53EF\u5728\u7EC4\u4EF6\u5916\u64CD\u4F5C\u72B6\u6001\u8FD9\u4E00\u70B9\u5176\u5B9E\u662F\u4E3A\u4E86\u6EE1\u8DB3\u65B9\u6848\u7684\u7075\u6D3B\u6027\uFF0C\u6709\u65F6\u5019\u4E1A\u52A1\u9700\u6C42\u7684\u5B9E\u73B0\u53EF\u80FD\u4F1A\u6D89\u53CA\u5230\u5728\u7EC4\u4EF6\u4E4B\u5916\u8FDB\u884C\u72B6\u6001\u64CD\u4F5C\u7684\u573A\u666F\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u5F88\u65B9\u4FBF\u4E86\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"redux-vs-zustand",children:"redux vs zustand"}),"\n",(0,r.jsx)(t.p,{children:"\u63A5\u4E0B\u6765\uFF0C\u5206\u6790\u4E00\u4E0B\u4E24\u8005\u7684\u6E90\u7801\u5B9E\u73B0\uFF0C\u5373\u53EF\u4E86\u89E3\u662F\u5426 zustand \u53EF\u4F5C\u4E3A\u4E00\u4E2A\u8F83\u597D\u7684\u66FF\u4EE3\u65B9\u6848\u3002\u5206\u4E24\u6B65\u8FDB\u884C\uFF0C\u7B2C\u4E00\u6B65\u9996\u5148\u6765\u770B\u770B\u4E24\u8005\u7684\u6838\u5FC3\u5B9E\u73B0\uFF0C\u5373\u72B6\u6001\u7BA1\u7406\u7684\u673A\u5236\u3002"}),"\n",(0,r.jsx)(t.p,{children:"\u9996\u5148\uFF0C\u6211\u4EEC\u8981\u660E\u767D\u72B6\u6001\u7BA1\u7406\u505A\u7684\u662F\u4EC0\u4E48\u4E8B\u60C5\u3002\u72B6\u6001\u5373\u6570\u636E\uFF0C\u5BF9\u4E8E\u4E00\u4E2A\u539F\u751F\u7684 Web \u5E94\u7528\u6765\u8BF4\uFF0C\u67D0\u4E00\u65F6\u523B\u9875\u9762\u5C55\u793A\u7684\u7ED3\u6784\u548C\u6837\u5F0F\u53D6\u51B3\u4E8E\u6B64\u65F6\u7684\u72B6\u6001\uFF0C\u72B6\u6001\u53EF\u80FD\u4F1A\u7531\u4E8E\u7528\u6237\u4EA4\u4E92\u52A8\u4F5C\u53D1\u751F\u53D8\u5316\u3002Web \u5E94\u7528\u6709\u5F88\u591A\u72B6\u6001\uFF0C\u6BD4\u5982\u8868\u5355\u7684\u52FE\u9009\u6309\u94AE\u72B6\u6001\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u8FD9\u79CD\u72B6\u6001\u89C6\u4E3A\u5C40\u90E8\u72B6\u6001\uFF0C\u8BE5\u72B6\u6001\u7684\u53D8\u5316\u4E0D\u4F1A\u5BFC\u81F4\u9875\u9762\u5176\u5B83\u90E8\u5206\u53D1\u751F\u53D8\u5316\uFF1B\u5F53\u7136\uFF0C\u5982\u679C\u6211\u4EEC\u5C06\u7528\u6237\u4F53\u9A8C\u8BBE\u8BA1\u66F4\u8FDB\u4E00\u6B65\uFF0C\u52FE\u9009\u6309\u94AE\u7684\u72B6\u6001\u4F1A\u540C\u6B65\u5F71\u54CD\u8868\u5355\u63D0\u4EA4\u6309\u94AE\u662F\u5426\u5904\u4E8E\u53EF\u70B9\u51FB\u7684\u72B6\u6001\uFF0C\u6B64\u65F6\u4E00\u4E2A\u72B6\u6001\u5728\u9875\u9762\u4E24\u4E2A\u90E8\u5206\u90FD\u6709\u5F71\u54CD\uFF0C\u5BF9\u4E8E\u66F4\u590D\u6742\u7684 Web \u5E94\u7528\u6765\u8BF4\uFF0C\u4E00\u4E2A\u72B6\u6001\u53EF\u80FD\u5F71\u54CD\u5230\u9875\u9762\u6570\u5341\u4E2A\u90E8\u5206\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u5BF9\u72B6\u6001\u7684\u7EF4\u62A4\u66F4\u65B0\u673A\u5236\u8FDB\u884C\u8BBE\u8BA1\uFF0C\u5C06\u72B6\u6001\u7684\u7EF4\u62A4\u4ECE\u9875\u9762\u8FDB\u884C\u89E3\u8026\uFF0C\u72EC\u7ACB\u5230\u5168\u5C40\u6765\u8FDB\u884C\uFF0C\u5219\u5C06\u8FD9\u79CD\u72B6\u6001\u79F0\u4E4B\u4E3A\u5168\u5C40\u72B6\u6001\u3002\u663E\u7136\uFF0C\u5BF9\u4E8E\u5C40\u90E8\u72B6\u6001\u6765\u8BF4\uFF0C\u9875\u9762\u5C40\u90E8\u53EF\u4EE5\u5B8C\u6210\u81EA\u6CBB\uFF0C\u800C\u5BF9\u4E8E\u5168\u5C40\u72B6\u6001\u6765\u8BF4\uFF0C\u5219\u9700\u8981\u4E00\u4E2A\u5168\u5C40\u4E2D\u5FC3\u5316\u7684\u201C\u6570\u636E\u5E93\u201D\u6765\u8FDB\u884C\u7BA1\u7406\u3002"}),"\n",(0,r.jsx)(t.p,{children:"\u73B0\u5728\uFF0C\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\uFF0C\u72B6\u6001\u7BA1\u7406\u9700\u8981\u63D0\u4F9B\u4E00\u4E2A\u7C7B\u4F3C\u4E2D\u5FC3\u5316\u7684\u201C\u6570\u636E\u5E93\u201D\uFF0C\u540C\u65F6\u5BF9\u4E8E\u72B6\u6001\u8981\u63D0\u4F9B\u66F4\u65B0\u673A\u5236\uFF0C\u800C\u72B6\u6001\u53EF\u4EE5\u88AB\u591A\u4E2A\u90E8\u5206\u4F9D\u8D56\uFF0C\u72B6\u6001\u66F4\u65B0\u7684\u540C\u65F6\u4F9D\u8D56\u65B9\u53EF\u4EE5\u53CA\u65F6\u83B7\u53D6\u5230\u6700\u65B0\u72B6\u6001\u3002\u8FD9\u4E0D\u5C31\u662F\u8F6F\u4EF6\u67B6\u6784\u4E2D\u5178\u578B\u7684\u53D1\u5E03/\u8BA2\u9605\u6A21\u5F0F\u5417\uFF1F\u6240\u4EE5\uFF0C\u5148\u6765\u770B\u770B redux \u548C zustand \u4E24\u8005\u63D0\u4F9B\u7684 API\uFF0C\u5927\u81F4\u5C31\u80FD\u7406\u89E3\u5176\u6838\u5FC3\u5B9E\u73B0\u7684\u6A21\u578B\u3002"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// Redux (https://redux.js.org/api/api-reference)\ncreateStore(reducer, [preloadedState], [enhancer]);\n// Store\ngetState();\nsubscribe(listener);\ndispatch(action);\n\n// zustand (https://github.com/pmndrs/zustand)\ncreateStore();\n// Store\ngetState();\nsubscribe();\nsetState();\n"})}),"\n",(0,r.jsx)(t.p,{children:"\u7531\u6B64\u53EF\u89C1\uFF0C\u4E24\u8005\u63D0\u4F9B\u7684\u6838\u5FC3 API \u662F\u975E\u5E38\u76F8\u8FD1\u7684\uFF0C\u4ECE API \u547D\u540D\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u5176\u6838\u5FC3\u5B9E\u73B0\u65E0\u7591\u662F\u57FA\u4E8E\u53D1\u5E03/\u8BA2\u9605\u6A21\u5F0F\u3002"}),"\n",(0,r.jsxs)(t.p,{children:["\u4E24\u8005\u90FD\u6709\u4E00\u4E2A ",(0,r.jsx)(t.code,{children:"createStore()"})," API \u6765\u521B\u5EFA\u4E00\u4E2A\u4E2D\u5FC3\u5316\u7684\u6570\u636E\u5B58\u50A8\u533A\uFF0C\u540C\u65F6\u521B\u5EFA\u7684 store \u5B9E\u4F8B\u5747\u4F1A\u66B4\u9732\u51FA\u4E3B\u52A8\u83B7\u53D6\u72B6\u6001\u7684 API ",(0,r.jsx)(t.code,{children:"getState()"}),"\uFF0C\u8BA2\u9605\u72B6\u6001\u66F4\u65B0\u7684 API ",(0,r.jsx)(t.code,{children:"subscribe()"}),"\uFF0C\u4EE5\u53CA\u66F4\u65B0\u72B6\u6001\u7684 API ",(0,r.jsx)(t.code,{children:"dispatch()"})," \u548C ",(0,r.jsx)(t.code,{children:"setState()"}),"\uFF0C\u5F53\u7136 redux \u8FD8\u5F15\u5165\u4E86\u4E00\u4E2A ",(0,r.jsx)(t.code,{children:"reducer"})," \u7684\u6982\u5FF5\u548C API\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u4E24\u8005\u7684\u6838\u5FC3\u5E93\u5747\u53EA\u6709 1kb \u5927\u5C0F\uFF0C\u800C zustand \u66F4\u5C0F\uFF0C\u8FD9\u662F\u56E0\u4E3A zustand \u5B9E\u73B0\u66F4\u4E3A\u7B80\u5355\u4E00\u4E9B\uFF0C\u5176\u5DEE\u5F02\u4E3B\u8981\u96C6\u4E2D\u5728\u72B6\u6001\u66F4\u65B0\u673A\u5236\u4E0A\uFF0C\u5176\u6B21\u662F\u72B6\u6001\u8BA2\u9605\u673A\u5236\u3002"}),"\n",(0,r.jsx)(t.h3,{id:"subscribe",children:(0,r.jsx)(t.code,{children:"subscribe()"})}),"\n",(0,r.jsxs)(t.p,{children:["\u5728\u72B6\u6001\u8BA2\u9605\u7684 ",(0,r.jsx)(t.code,{children:"subscribe()"})," API \u5B9E\u73B0\u4E2D\uFF0Czustand \u4EC5\u662F\u7B80\u5355\u7684\u76F4\u63A5\u5C06\u8BA2\u9605\u51FD\u6570\u6DFB\u52A0\u5230\u8BA2\u9605\u5217\u8868\u4E2D\uFF0C\u540C\u65F6\u63D0\u4F9B\u4E86\u4E00\u4E2A ",(0,r.jsx)(t.code,{children:"selector"})," \u673A\u5236\u6765\u8FC7\u6EE4\u72B6\u6001\uFF1A"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// see https://github.com/pmndrs/zustand/blob/v3.6.5/src/vanilla.ts#L126\nconst subscribe: Subscribe<TState> = <StateSlice>(\n  listener: StateListener<TState> | StateSliceListener<StateSlice>,\n  selector?: StateSelector<TState, StateSlice>,\n  equalityFn?: EqualityChecker<StateSlice>\n) => {\n  if (selector || equalityFn) {\n    return subscribeWithSelector(\n      listener as StateSliceListener<StateSlice>,\n      selector,\n      equalityFn\n    );\n  }\n  listeners.add(listener as StateListener<TState>);\n  // Unsubscribe\n  return () => listeners.delete(listener as StateListener<TState>);\n};\n\n// see https://github.com/pmndrs/zustand/blob/v3.6.5/src/vanilla.ts#L107\nconst subscribeWithSelector = <StateSlice>(\n  listener: StateSliceListener<StateSlice>,\n  selector: StateSelector<TState, StateSlice> = getState as any,\n  equalityFn: EqualityChecker<StateSlice> = Object.is\n) => {\n  console.warn('[DEPRECATED] Please use `subscribeWithSelector` middleware');\n  let currentSlice: StateSlice = selector(state);\n  function listenerToAdd() {\n    const nextSlice = selector(state);\n    if (!equalityFn(currentSlice, nextSlice)) {\n      const previousSlice = currentSlice;\n      listener((currentSlice = nextSlice), previousSlice);\n    }\n  }\n  listeners.add(listenerToAdd);\n  // Unsubscribe\n  return () => listeners.delete(listenerToAdd);\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u901A\u8FC7\u4E0A\u9762 ",(0,r.jsx)(t.code,{children:"listenerToAdd()"})," \u51FD\u6570\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u8BA2\u9605\u72B6\u6001\u65F6\u63D0\u4F9B\u4E86 ",(0,r.jsx)(t.code,{children:"selector"})," \u7684\u8BDD\uFF0C\u72B6\u6001\u66F4\u65B0\u65F6\u4F1A\u9996\u5148\u5C06\u72B6\u6001\u8FC7\u6EE4\u4E00\u904D\u518D\u901A\u77E5\u7ED9\u8BA2\u9605\u8005\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// see https://github.com/pmndrs/zustand/blob/v3.6.5/src/vanilla.ts#L89\nconst setState: SetState<TState> = (partial, replace) => {\n  // ...\n  listeners.forEach((listener) => listener(state, previousState));\n  // ...\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"setState()"})," \u66F4\u65B0\u72B6\u6001\u65F6\uFF0C\u6240\u6709\u8BA2\u9605\u51FD\u6570\u5C06\u4F1A\u8C03\u7528\uFF0C\u540C\u65F6\u4F1A\u5C06\u65B0\u7684\u72B6\u6001\u548C\u65E7\u7684\u72B6\u6001\u4F20\u9012\u7ED9\u8BA2\u9605\u51FD\u6570\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u63A5\u4E0B\u6765\uFF0C\u770B\u770B redux \u7684\u5B9E\u73B0\uFF0Credux \u5728\u6DFB\u52A0\u8BA2\u9605\u51FD\u6570\u65F6\u505A\u4E86\u4E00\u4E9B\u7279\u6B8A\u7684\u5224\u65AD\uFF0C\u4EE5\u53CA\u7279\u6B8A\u5904\u7406\uFF1A"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// see https://github.com/reduxjs/redux/blob/v4.1.2/src/createStore.js#L128\nfunction subscribe(listener) {\n  // ...\n  if (isDispatching) {\n    throw new Error('...');\n  }\n\n  let isSubscribed = true;\n\n  ensureCanMutateNextListeners();\n  nextListeners.push(listener);\n\n  return function unsubscribe() {\n    if (!isSubscribed) {\n      return;\n    }\n\n    if (isDispatching) {\n      throw new Error('...');\n    }\n\n    isSubscribed = false;\n\n    ensureCanMutateNextListeners();\n    const index = nextListeners.indexOf(listener);\n    nextListeners.splice(index, 1);\n    currentListeners = null;\n  };\n}\n\n// see https://github.com/reduxjs/redux/blob/v4.1.2/src/createStore.js#L82\nfunction ensureCanMutateNextListeners() {\n  if (nextListeners === currentListeners) {\n    nextListeners = currentListeners.slice();\n  }\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u6839\u636E\u5B9E\u73B0\uFF0Credux \u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"isDispatching"})," \u6807\u5FD7\u4F4D\u907F\u514D\u5728\u72B6\u6001\u66F4\u65B0\u671F\u95F4\u6DFB\u52A0\u8BA2\u9605\u51FD\u6570\uFF0C\u4EE5\u53CA\u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"ensureCanMutateNextListeners()"})," \u51FD\u6570\u5C06\u8BA2\u9605\u51FD\u6570\u5217\u8868\u505A\u4E86\u6D45\u62F7\u8D1D\u518D\u8FDB\u884C\u6DFB\u52A0\u548C\u5220\u9664\u64CD\u4F5C\uFF0C\u8FD9\u90FD\u662F\u5BF9\u6F5C\u5728\u7684\u95EE\u9898\u7684\u89C4\u907F\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// see https://github.com/reduxjs/redux/blob/v4.1.2/src/createStore.js#L197\nfunction dispatch(action) {\n  // ...\n\n  const listeners = (currentListeners = nextListeners);\n  for (let i = 0; i < listeners.length; i++) {\n    const listener = listeners[i];\n    listener();\n  }\n\n  return action;\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["redux \u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"dispatch()"})," \u66F4\u65B0\u72B6\u6001\u65F6\uFF0C\u7531\u4E8E\u5728\u8BA2\u9605\u65F6\u6CA1\u6709\u9ED8\u8BA4\u63D0\u4F9B ",(0,r.jsx)(t.code,{children:"selector"})," \u673A\u5236\uFF0C\u6240\u4EE5\u4F1A\u65E0\u5DEE\u522B\u7684\u901A\u77E5\u6240\u6709\u8BA2\u9605\u8005\uFF0C\u540C\u65F6\u4E5F\u4E0D\u4F1A\u5C06\u65B0\u65E7\u72B6\u6001\u4F20\u9012\u7ED9\u8BA2\u9605\u51FD\u6570\uFF0C\u5F53\u7136\u5728\u5B98\u65B9\u793A\u4F8B\u4EE3\u7801\u4E2D\u53EF\u4EE5\u770B\u5230\uFF0C\u5B98\u65B9\u63A8\u8350\u5728\u8BA2\u9605\u51FD\u6570\u4E2D\u4E3B\u52A8\u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"getState()"})," \u83B7\u53D6\u65B0\u7684\u72B6\u6001\u4EE5\u53CA\u5B8C\u6210 selector \u64CD\u4F5C\u3002\u53EF\u4EE5\u8BF4\uFF0C\u7531\u4E8E redux \u548C zustand \u8BBE\u8BA1\u7406\u5FF5\u4E0D\u540C\uFF0C\u8BA2\u9605\u7684\u5B9E\u73B0\u65B9\u5F0F\u4E5F\u7565\u6709\u5DEE\u522B\uFF0C\u524D\u8005\u63A7\u5236\u7684\u66F4\u7EC6\u81F4\uFF0C\u800C\u7075\u6D3B\u6027\u5F88\u9AD8\uFF0C\u800C\u540E\u8005\u5728\u4FDD\u6301\u7B80\u5355\u6027\u7684\u540C\u65F6\u4E5F\u6CA1\u6709\u727A\u7272\u7075\u6D3B\u6027\u3002"]}),"\n",(0,r.jsxs)(t.h3,{id:"setstate--dispatch",children:[(0,r.jsx)(t.code,{children:"setState()"})," && ",(0,r.jsx)(t.code,{children:"dispatch()"})]}),"\n",(0,r.jsxs)(t.p,{children:["\u72B6\u6001\u66F4\u65B0\u673A\u5236\u662F\u4E24\u8005\u5B9E\u73B0\u6700\u5927\u7684\u4E0D\u540C\uFF0Czustand \u63D0\u4F9B\u4E00\u4E2A ",(0,r.jsx)(t.code,{children:"setState()"})," \u51FD\u6570\u6765\u66F4\u65B0\u72B6\u6001\uFF1A"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// see https://github.com/pmndrs/zustand/blob/v3.6.5/src/vanilla.ts#L89\nconst setState: SetState<TState> = (partial, replace) => {\n  // TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\n  // https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\n  const nextState =\n    typeof partial === 'function'\n      ? (partial as (state: TState) => TState)(state)\n      : partial;\n  if (nextState !== state) {\n    const previousState = state;\n    state = replace\n      ? (nextState as TState)\n      : Object.assign({}, state, nextState);\n    listeners.forEach((listener) => listener(state, previousState));\n  }\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u6839\u636E\u6E90\u7801\u5B9E\u73B0\u6765\u770B\uFF0Czustand \u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"Object.assign"})," \u51FD\u6570\u5408\u5E76\u66F4\u65B0\u72B6\u6001\uFF0C\u540C\u65F6\u63D0\u4F9B ",(0,r.jsx)(t.code,{children:"replace"})," \u6807\u5FD7\u4F4D\u76F4\u63A5\u5C06\u65E7\u72B6\u6001\u5B8C\u5168\u66FF\u6362\u3002"]}),"\n",(0,r.jsxs)(t.p,{children:["\u800C redux \u7684\u72B6\u6001\u66F4\u65B0\u5219\u8981\u590D\u6742\u4E00\u4E9B\uFF0C\u4E3B\u8981\u662F\u5B98\u65B9\u63A8\u8350\u7684\u7F16\u7A0B\u6A21\u5F0F\u5C06\u72B6\u6001\u66F4\u65B0\u62C6\u5206\u4E3A\u591A\u4E2A\u6B65\u9AA4\uFF0C",(0,r.jsx)(t.code,{children:"dispatch()"})," \u51FD\u6570\u89E6\u53D1\u4E00\u4E2A ",(0,r.jsx)(t.code,{children:"Action"}),"\uFF0C\u800C\u5177\u4F53\u5904\u7406 Action \u4EE5\u53CA\u72B6\u6001\u5408\u5E76\u7684\u64CD\u4F5C\u5747\u7531 ",(0,r.jsx)(t.code,{children:"Reducer"})," \u51FD\u6570\u5B8C\u6210\uFF0C\u8BE5\u51FD\u6570\u662F\u4E00\u4E2A\u7EAF\u51FD\u6570\u3002\u81F3\u4E8E\u4E3A\u4EC0\u4E48\u8981\u8FD9\u4E48\u8BBE\u8BA1\uFF0C\u5B98\u65B9\u6709\u8BF4\u660E\uFF0C\u7EAF\u51FD\u6570\u5BF9\u4E8E\u72B6\u6001\u53D8\u5316\u6765\u8BF4\u662F\u53EF\u9884\u6D4B\u7684\uFF0C\u800C\u4E14\u5229\u4E8E\u6D4B\u8BD5\uFF0C\u66F4\u662F\u5B9E\u73B0\u65F6\u95F4\u65C5\u884C\u7C7B\u4F3C\u529F\u80FD\u7684\u57FA\u7840\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// see https://github.com/reduxjs/redux/blob/v4.1.2/src/createStore.js#L197\nfunction dispatch(action) {\n  if (!isPlainObject(action)) {\n    throw new Error(\n      `Actions must be plain objects. Instead, the actual type was: '${kindOf(\n        action\n      )}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`\n    );\n  }\n\n  if (typeof action.type === 'undefined') {\n    throw new Error(\n      'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.'\n    );\n  }\n\n  if (isDispatching) {\n    throw new Error('Reducers may not dispatch actions.');\n  }\n\n  try {\n    isDispatching = true;\n    currentState = currentReducer(currentState, action);\n  } finally {\n    isDispatching = false;\n  }\n\n  const listeners = (currentListeners = nextListeners);\n  for (let i = 0; i < listeners.length; i++) {\n    const listener = listeners[i];\n    listener();\n  }\n\n  return action;\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u6839\u636E\u6E90\u7801\u5B9E\u73B0\u6765\u770B\uFF0C\u8FD9\u91CC\u51FA\u73B0\u4E86 ",(0,r.jsx)(t.code,{children:"isDispatching"})," \u6807\u5FD7\u4F4D\uFF0C\u4E3B\u8981\u662F\u7528\u6765\u9650\u5236\u72B6\u6001\u66F4\u65B0\u8FC7\u7A0B\u4E2D\u4E0D\u80FD\u518D\u6B21\u53D1\u8D77\u72B6\u6001\u66F4\u65B0\u64CD\u4F5C\uFF0C\u907F\u514D\u51FA\u73B0\u9519\u8BEF\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u4E0D\u8FC7\uFF0C\u6709\u4E00\u70B9\u503C\u5F97\u63D0\u4E00\u4E0B\uFF0Credux \u9ED8\u8BA4\u4E0D\u652F\u6301\u5F02\u6B65\u66F4\u65B0\u72B6\u6001\uFF0C\u9700\u8981\u501F\u52A9 redux-thunk \u5E93\u6765\u652F\u6301\uFF1B\u800C zustand \u672C\u8EAB\u5219\u662F\u652F\u6301\u5F02\u6B65\u66F4\u65B0\u72B6\u6001\u7684\u3002"}),"\n",(0,r.jsx)(t.p,{children:"\u6839\u636E\u4EE5\u4E0A\u5206\u6790\u6765\u770B\uFF0C\u5B9E\u9645\u4E0A\u6838\u5FC3\u5B9E\u73B0\u662F\u76F8\u4F3C\u7684\uFF0C\u800C\u4E14 zustand \u4F5C\u4E3A\u540E\u6765\u8005\uFF0C\u5BF9 redux \u6709\u501F\u9274\u4E5F\u6709\u7B80\u5316\u7684\u5730\u65B9\uFF0C\u6EE1\u8DB3\u72B6\u6001\u7BA1\u7406\u7684\u6838\u5FC3\u7B80\u5355\u9700\u6C42\u662F\u6CA1\u6709\u591A\u5927\u95EE\u9898\u7684\uFF0C\u53EF\u4F5C\u4E3A redux \u7684\u4E00\u4E2A\u66FF\u4EE3\u65B9\u6848\u3002"}),"\n",(0,r.jsx)(t.h3,{id:"reactjs-\u9002\u914D",children:"React.js \u9002\u914D"}),"\n",(0,r.jsx)(t.p,{children:"\u5982\u679C\u8BF4\uFF0C\u6838\u5FC3\u5E93\u5DEE\u5F02\u8F83\u5C0F\uFF0C\u800C\u4E14\u5305\u5C3A\u5BF8\u76F8\u8FD1\u7684\u8BDD\uFF0C\u90A3\u4E48\u6700\u5927\u7684\u5DEE\u5F02\u5219\u51FA\u73B0\u5728\u5BF9 React.js \u5E93\u7684\u9002\u914D\u4E0A\u9762\u3002"}),"\n",(0,r.jsx)(t.p,{children:"zustand \u51FA\u73B0\u7684\u8F83\u665A\uFF0C\u76EE\u524D Hook API \u5DF2\u7ECF\u6210\u4E3A React.js \u793E\u533A\u7684\u4E3B\u6D41\uFF0C\u6240\u4EE5 zustand \u5728\u5BF9\u5176\u9002\u914D\u7684\u65F6\u5019\u4E5F\u662F\u4EE5 Hook API \u7684\u65B9\u5F0F\u5B9E\u73B0\uFF0C\u6CA1\u6709\u63D0\u4F9B\u7C7B\u7EC4\u4EF6\u7684\u9002\u914D\u3002"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// see https://github.com/pmndrs/zustand/blob/v3.6.5/src/index.ts#L64\nfunction create<\n  TState extends State,\n  CustomSetState,\n  CustomGetState,\n  CustomStoreApi extends StoreApi<TState>\n>(\n  createState:\n    | StateCreator<TState, CustomSetState, CustomGetState, CustomStoreApi>\n    | CustomStoreApi\n): UseBoundStore<TState, CustomStoreApi> {\n  // ...\n  const useStore: any = <StateSlice>(\n    selector: StateSelector<TState, StateSlice> = api.getState as any,\n    equalityFn: EqualityChecker<StateSlice> = Object.is\n  ) => {\n    const [, forceUpdate] = useReducer((c) => c + 1, 0) as [never, () => void];\n    // ...\n    const stateBeforeSubscriptionRef = useRef(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (\n            !equalityFnRef.current(\n              currentSliceRef.current as StateSlice,\n              nextStateSlice\n            )\n          ) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener(); // state has changed before subscription\n      }\n      return unsubscribe;\n    }, []);\n\n    const sliceToReturn = hasNewStateSlice\n      ? (newStateSlice as StateSlice)\n      : currentSliceRef.current;\n    useDebugValue(sliceToReturn);\n    return sliceToReturn;\n  };\n\n  // ...\n  return useStore;\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["zustand \u5C06 ",(0,r.jsx)(t.code,{children:"createStore"})," \u51FD\u6570\u7684\u8FD4\u56DE\u503C\u4F5C\u4E3A\u4E00\u4E2A\u81EA\u5B9A\u4E49 hook \u6765\u5B9E\u73B0\uFF0C\u5176\u4E2D\u4E3A\u4E86\u8BA9 React.js \u7EC4\u4EF6\u80FD\u611F\u77E5\u5230\u72B6\u6001\u66F4\u65B0\uFF0C\u662F\u5229\u7528 ",(0,r.jsx)(t.code,{children:"useEffect"})," \u6765\u5B8C\u6210\u8BA2\u9605\u64CD\u4F5C\uFF0C\u800C\u72B6\u6001\u66F4\u65B0\u53D1\u5E03\u540E\uFF0C\u5219\u901A\u8FC7 ",(0,r.jsx)(t.code,{children:"forceUpdate()"})," \u6765\u5F3A\u5236\u7EC4\u4EF6\u8FDB\u884C rerender \u4EE5\u83B7\u53D6\u6700\u65B0\u7684\u72B6\u6001\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u8FD9\u91CC\uFF0C\u770B\u770B\u5982\u4F55\u5728\u51FD\u6570\u7EC4\u4EF6\u4E2D\u4F7F\u7528 zustand\uFF1A"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import create from 'zustand';\n\n// Store\nconst useStore = create((set) => ({\n  bears: 0,\n  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\n  removeAllBears: () => set({ bears: 0 }),\n}));\n\n// Component\nfunction BearCounter() {\n  const bears = useStore((state) => state.bears);\n  return <h1>{bears} around here ...</h1>;\n}\n\nfunction Controls() {\n  const increasePopulation = useStore((state) => state.increasePopulation);\n  return <button onClick={increasePopulation}>one up</button>;\n}\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u5B9E\u9645\u4E0A\uFF0C\u7528\u6CD5\u548C react-redux \u975E\u5E38\u76F8\u4F3C\uFF0C\u4F46\u83B7\u53D6\u72B6\u6001\u4E0E\u66F4\u65B0\u72B6\u6001\u5747\u53EA\u9700\u8981\u4F7F\u7528 ",(0,r.jsx)(t.code,{children:"useStore"})," \u4E00\u4E2A API \u5373\u53EF\u5B8C\u6210\u4E1A\u52A1\u3002"]}),"\n",(0,r.jsxs)(t.p,{children:["\u7136\u800C\uFF0Creact-redux \u7684\u5B9E\u73B0\u5219\u8981\u590D\u6742\u7684\u591A\u3002\u7531\u4E8E\u5176\u51FA\u73B0\u7684\u8F83\u65E9\uFF0C\u6240\u4EE5\u540C\u65F6\u9002\u914D\u4E86\u7C7B\u7EC4\u4EF6\u548C\u51FD\u6570\u7EC4\u4EF6\u3002\u8FD9\u91CC\u4E0D\u518D\u7EC6\u7A76 react-redux \u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u4F46\u5176\u4E0E zustand \u6700\u5927\u7684\u5DEE\u5F02\u5219\u5728\u4E8E\u628A\u72B6\u6001\u653E\u5728\u4E86 ",(0,r.jsx)(t.code,{children:"Context"})," \u4E2D\u5B58\u50A8\uFF0C\u6240\u4EE5\u9700\u8981\u4F7F\u7528 ",(0,r.jsx)(t.code,{children:"Provider"})," \u5C06\u9875\u9762\u7684\u6839\u7EC4\u4EF6\u5305\u88F9\u8D77\u6765\u624D\u80FD\u4F7F\u7528\u3002redux \u7684 ",(0,r.jsx)(t.code,{children:"useSelector()"})," Hook API \u4E0E zustand \u4E0A\u9762\u63D0\u5230\u7684 ",(0,r.jsx)(t.code,{children:"useStore()"})," \u7684\u5B9E\u73B0\u903B\u8F91\u4E5F\u975E\u5E38\u76F8\u4F3C\u3002"]}),"\n",(0,r.jsx)(t.h3,{id:"\u8C03\u5F0F\u5DE5\u5177",children:"\u8C03\u5F0F\u5DE5\u5177"}),"\n",(0,r.jsx)(t.p,{children:"\u4E00\u4E2A\u6838\u5FC3\u5DE5\u5177\u5E93\u597D\u4E0D\u597D\u7528\uFF0C\u4E0D\u4EC5\u8981\u80FD\u89E3\u51B3\u4E1A\u52A1\u95EE\u9898\uFF0C\u540C\u65F6\u4E5F\u8981\u80FD\u63D0\u4F9B\u826F\u597D\u7684\u5F00\u53D1\u4F53\u9A8C\uFF0Credux \u4E4B\u6240\u4EE5\u80FD\u6210\u4E3A React.js \u793E\u533A\u666E\u904D\u91C7\u7528\u7684\u72B6\u6001\u7BA1\u7406\u65B9\u6848\uFF0C\u4E0D\u4EC5\u5728\u4E8E\u5176\u5B9E\u73B0\u7684\u4F18\u96C5\uFF0C\u5021\u5BFC\u7684\u4F18\u79C0\u7684\u6A21\u5F0F\uFF0C\u66F4\u5728\u4E8E\u5176\u914D\u5957\u7684\u8C03\u8BD5\u5DE5\u5177\u3001\u4E2D\u95F4\u4EF6\u4E5F\u975E\u5E38\u597D\u7528\u3002\u6240\u4EE5\uFF0Czustand \u4F5C\u4E3A\u540E\u6765\u8005\u5E76\u6CA1\u6709\u91CD\u590D\u9020\u8F6E\u5B50\uFF0C\u800C\u662F\u5C3D\u6700\u5927\u7684\u53EF\u80FD\u91CD\u7528 redux \u793E\u533A\u7684\u5F00\u6E90\u65B9\u6848\uFF0C\u8FD9\u4E00\u70B9\u4E5F\u662F\u6BD4\u8F83\u597D\u7684\uFF0C\u81F3\u5C11\u4ECE redux \u8FC1\u79FB\u5230 zustand \u4E0D\u4F1A\u6709\u592A\u5927\u7684\u56F0\u96BE\uFF0C\u5F00\u53D1\u4F53\u9A8C\u4E0A\u6765\u8BF4\u8FD8\u662F\u4E0D\u9519\u7684\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"\u7ED3\u8BED",children:"\u7ED3\u8BED"}),"\n",(0,r.jsx)(t.p,{children:"\u81F3\u6B64\uFF0C\u5B8C\u6210\u4E86\u5BF9 zustand \u8FD9\u4E2A\u8F7B\u91CF\u7EA7\u7684\u72B6\u6001\u7BA1\u7406\u65B9\u6848\u7684\u63A2\u7D22\uFF0C\u81F3\u5C11\u5728\u6EE1\u8DB3\u72B6\u6001\u7BA1\u7406\u7B80\u5355\u7684\u6838\u5FC3\u9700\u6C42\u3001\u4F7F\u7528\u7B80\u5355\u3001\u5177\u5907\u826F\u597D\u7684\u8C03\u5F0F\u5DE5\u5177\u7B49\u51E0\u65B9\u9762\u6765\u8BF4\u8FD8\u662F\u4E0D\u9519\u7684\uFF0C\u4F5C\u4E3A redux \u7684\u8F7B\u91CF\u7EA7\u66FF\u4EE3\u65B9\u6848\uFF0C\u5B8C\u5168\u503C\u5F97\u4E00\u8BD5\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"\u53C2\u8003",children:"\u53C2\u8003"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://redux.js.org/",children:"redux"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://react-redux.js.org/",children:"react-redux"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://zustand.surge.sh/",children:"zustand"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://javascript.plainenglish.io/lets-build-our-own-redux-9384b283529c",children:"Let\u2019s build our own Redux"})}),"\n"]})]})}function u(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},50065:function(e,t,n){n.d(t,{Z:()=>l,a:()=>c});var s=n(67294);let r={},i=s.createContext(r);function c(e){let t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(i.Provider,{value:t},e.children)}},79194:function(e){e.exports=JSON.parse('{"permalink":"/2021/11/18/computer-technology/web-frontend/web-app-model-zustand","editUrl":"https://github.com/wang1212/wang1212.github.io/tree/master/blog/computer-technology/web-frontend/2021-11-18-web-app-model-zustand.md","source":"@site/blog/computer-technology/web-frontend/2021-11-18-web-app-model-zustand.md","title":"Web \u5E94\u7528\uFF1A\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u5DE5\u5177 zustand","description":"Web \u7F51\u9875\u5411 Web \u5E94\u7528\u53D1\u5C55\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u52BF\u5FC5\u4F1A\u51FA\u73B0 Web \u9879\u76EE\u7684\u590D\u6742\u5316\u95EE\u9898\uFF0C\u800C\u5728\u79FB\u52A8\u7AEF\u573A\u666F\uFF0C\u57FA\u4E8E React.js \u7684\u5E94\u7528\u4E2D\u5982\u4F55\u7BA1\u7406\u72B6\u6001\uFF1Fzustand \u4E5F\u8BB8\u503C\u5F97\u4E00\u8BD5\u3002","date":"2021-11-18T00:14:00.000Z","tags":[{"inline":true,"label":"\u8BA1\u7B97\u673A\u6280\u672F","permalink":"/tags/\u8BA1\u7B97\u673A\u6280\u672F"},{"inline":true,"label":"Web","permalink":"/tags/web"},{"inline":true,"label":"Web \u524D\u7AEF","permalink":"/tags/web-\u524D\u7AEF"},{"inline":true,"label":"\u5E94\u7528\u72B6\u6001\u7BA1\u7406","permalink":"/tags/\u5E94\u7528\u72B6\u6001\u7BA1\u7406"},{"inline":true,"label":"React.js","permalink":"/tags/react-js"},{"inline":true,"label":"\u6E90\u7801\u89E3\u6790","permalink":"/tags/\u6E90\u7801\u89E3\u6790"}],"readingTime":12.39,"hasTruncateMarker":true,"authors":[{"name":"\u4E0D\u5982\u6000\u5FF5","title":"Web \u524D\u7AEF\u5DE5\u7A0B\u5E08 (Web Front-end Engineer)","url":"https://github.com/wang1212","email":"mrwang1212@126.com","socials":{"github":"https://github.com/wang1212","x":"https://x.com/wang1212x","reddit":"https://www.reddit.com/user/Warm_Salt_2251","rednote":"https://www.xiaohongshu.com/user/profile/5e4130cb00000000010023fd"},"imageURL":"/img/authors/wang1212.png","key":"wang1212","page":null}],"frontMatter":{"title":"Web \u5E94\u7528\uFF1A\u8F7B\u91CF\u7EA7\u72B6\u6001\u7BA1\u7406\u5DE5\u5177 zustand","date":"2021-11-18T00:14:00.000Z","update":"2021-11-18T00:14:00.000Z","authors":"wang1212","tags":["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","\u5E94\u7528\u72B6\u6001\u7BA1\u7406","React.js","\u6E90\u7801\u89E3\u6790"],"keywords":["\u8BA1\u7B97\u673A\u6280\u672F","Web","Web \u524D\u7AEF","\u5E94\u7528\u72B6\u6001\u7BA1\u7406","React.js","\u6E90\u7801\u89E3\u6790"],"description":"Web \u7F51\u9875\u5411 Web \u5E94\u7528\u53D1\u5C55\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u52BF\u5FC5\u4F1A\u51FA\u73B0 Web \u9879\u76EE\u7684\u590D\u6742\u5316\u95EE\u9898\uFF0C\u800C\u5728\u79FB\u52A8\u7AEF\u573A\u666F\uFF0C\u57FA\u4E8E React.js \u7684\u5E94\u7528\u4E2D\u5982\u4F55\u7BA1\u7406\u72B6\u6001\uFF1Fzustand \u4E5F\u8BB8\u503C\u5F97\u4E00\u8BD5\u3002"},"unlisted":false,"prevItem":{"title":"Web \u524D\u7AEF\u8C03\u8BD5\u5DE5\u5177\uFF1ASourceMap \u6587\u4EF6","permalink":"/computer-technology/web-frontend/tools-web-fee-debug-with-source-map"},"nextItem":{"title":"\u53C8\u8BFB\u6751\u4E0A\u6625\u6811","permalink":"/2021/11/15/life/reading/"}}')}}]);