(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[32731],{87874:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});n(67294);const a="loading-coffee_wYts";var r=n(85893);const s=()=>(0,r.jsxs)("div",{className:a,children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})},69689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var a=n(67294),r=n(90512),s=n(94861),o=n(57277),i=n.n(o);var l=n(87874);const u=(new Date).getFullYear(),c=Array.from(Array(u-2017+1),((e,t)=>2017+t)),h=Array.from(Array(12),((e,t)=>`${t+1}\u6708`)),p=["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],d=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"];var f=n(52263),y=n(59734);var g=n(79250),m=n(85893);function v(e){let{metadata:t,eventsData:n}=e;return n?(0,m.jsxs)("section",{children:[(0,m.jsx)("header",{children:(0,m.jsxs)("h3",{style:{display:"flex",alignItems:"center"},children:[n.date," ",(0,m.jsx)("span",{className:"margin-left--sm",children:p[new Date(n.date).getDay()]}),(0,m.jsxs)("small",{className:"margin-right-md",style:{marginLeft:"auto",opacity:.3},children:["\u7b2c ",(a=new Date(n.date),Math.floor((a-new Date(a.getFullYear(),0,0))/1e3/60/60/24))," \u5929"]})]})}),(0,m.jsx)("main",{children:n.events.map(((e,n)=>(0,m.jsxs)("div",{className:(0,r.Z)("card","margin-bottom--md"),children:[(0,m.jsx)("div",{className:"card__header",children:(0,m.jsx)("h3",{children:t.type[e.type]})}),(0,m.jsx)("div",{className:"card__body",children:(0,m.jsx)("p",{dangerouslySetInnerHTML:{__html:e.description?.replace(/\n/g,"<br />")}})}),(e.labels?.length||e.links?.length)&&(0,m.jsxs)("div",{className:"card__footer",children:[(0,m.jsx)("div",{style:{display:e.labels?.length?"block":"none"},children:e.labels?.map(((e,t)=>(0,m.jsx)("span",{className:"badge badge--secondary margin-right--sm",children:e},t)))}),(0,m.jsx)("div",{style:{display:e?.links?.length?"block":"none"},className:"margin-top--md",children:(0,m.jsx)("ul",{style:{margin:0},children:e.links?.map(((e,t)=>(0,m.jsx)("li",{children:(0,m.jsx)("a",{href:e.url,children:e?.text??e.url})},t)))})})]})||""]},n)))})]}):null;var a}function b(e){let{year:t,dataset:n,onDateClick:r}=e;const[s,o]=(0,a.useState)(null);return(0,m.jsx)("section",{className:"margin-bottom--md",children:(0,m.jsx)(i(),{startDate:new Date(t-1+"-12-31"),endDate:new Date(`${t}-12-31`),monthLabels:h,weekdayLabels:d,tooltipDataAttrs:e=>({"data-tooltip":`test ${e?.date}`}),classForValue:e=>e?e?.events?.length<=4?`color-github-${e.events.length}`:"color-github-4":"color-empty",onClick:e=>r?.(e),onMouseOver:(e,t)=>o(t?{event:e,data:t}:null),onMouseLeave:()=>o(null),values:n})})}const k=()=>{const[e,t]=(0,a.useState)(u),{data:n,isError:r,isLoading:o}=function(e){const t=(0,f.Z)(),{data:n,error:a,isLoading:r}=(0,y.ZP)(`/api/record/${e}`,(()=>fetch(`${t.siteConfig.baseUrl}database/record/${e}.json`).then((e=>e.json()))));return{data:n,isError:a,isLoading:r}}(e),[i,h]=(0,a.useState)(null),[p,d]=(0,g.u)(),[k,D]=(0,g.u)(),x=(0,a.useMemo)((()=>{let e=[];return n?(Object.keys(n.events).forEach((t=>{e.push({date:`${n.metadata.year}-${t}`,events:n.events[t]})})),h(e[0]),e):(h(null),e)}),[n]);return(0,m.jsx)(s.Z,{title:"\u8bb0\u5f55",description:"\u8bb0\u5f55\u65e5\u5e38\u5c0f\u4e8b",children:(0,m.jsx)("div",{className:"margin-vert--lg",children:(0,m.jsxs)("div",{ref:p,className:"container",children:[(0,m.jsx)("section",{className:"margin-bottom--lg",children:(0,m.jsxs)("div",{className:"dropdown dropdown--hoverable",children:[(0,m.jsxs)("button",{className:"button button--primary",children:[e,"\u5e74"]}),(0,m.jsx)("ul",{className:"dropdown__menu",children:c.slice().sort(((e,t)=>t-e)).map((e=>(0,m.jsx)("li",{children:(0,m.jsxs)("a",{className:"dropdown__link",href:"#",onClick:n=>{n.preventDefault(),t(e)},children:[e,"\u5e74"]})},e)))})]})}),(r||o)&&(0,m.jsx)("section",{className:"margin-vert--xl",style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)(l.Z,{})})||"",!r&&!o&&(0,m.jsxs)("section",{ref:k,children:[(0,m.jsx)(b,{year:e,dataset:x,onDateClick:h}),(0,m.jsx)(v,{metadata:n.metadata,eventsData:i},i?.date)]},e)||""]})})})}},57277:function(e,t,n){e.exports=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function h(e,t){return p(e)||d(e,t)||f()}function p(e){if(Array.isArray(e))return e}function d(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(l){r=!0,s=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw s}}return n}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function y(e,t){return e(t={exports:{}},t.exports),t.exports}e=e&&e.hasOwnProperty("default")?e.default:e;var g="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function m(){}function v(){}v.resetWarningCache=m;var b=function(){function e(e,t,n,a,r,s){if(s!==g){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:v,resetWarningCache:m};return n.PropTypes=n,n},k=y((function(e){e.exports=b()}));function D(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function x(e,t){var n;void 0===t&&(t=D);var a,r=[],s=!1;function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return s&&n===this&&t(o,r)||(a=e.apply(this,o),s=!0,n=this,r=o),a}return o}var S=864e5,w=7,j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],L=["","Mon","","Wed","","Fri",""];function W(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}function O(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function C(e){return e instanceof Date?e:new Date(e)}function M(e){return W(new Date,-e)}function z(e){for(var t=[],n=0;n<e;n+=1)t.push(n);return t}var E=10,N=4,F="react-calendar-heatmap-",T=function(n){function l(){var e,n;t(this,l);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r(u(n=c(this,(e=i(l)).call.apply(e,[this].concat(s)))),"getValueCache",x((function(e){return e.values.reduce((function(e,t){var a=C(t.date);return e[Math.floor((a-n.getStartDateWithEmptyDays())/S)]={value:t,className:n.props.classForValue(t),title:n.props.titleForValue?n.props.titleForValue(t):null,tooltipDataAttrs:n.getTooltipDataAttrsForValue(t)},e}),{})}))),n}return o(l,n),a(l,[{key:"getDateDifferenceInDays",value:function(){var e=this.props,t=e.startDate,n=e.numDays;if(n)return console.warn("numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead."),n;var a=this.getEndDate()-C(t);return Math.ceil(a/S)}},{key:"getSquareSizeWithGutter",value:function(){return E+this.props.gutterSize}},{key:"getMonthLabelSize",value:function(){return this.props.showMonthLabels?this.props.horizontal?E+N:2*(E+N):0}},{key:"getWeekdayLabelSize",value:function(){return this.props.showWeekdayLabels?this.props.horizontal?30:1.5*E:0}},{key:"getStartDate",value:function(){return W(this.getEndDate(),1-this.getDateDifferenceInDays())}},{key:"getEndDate",value:function(){return O(C(this.props.endDate))}},{key:"getStartDateWithEmptyDays",value:function(){return W(this.getStartDate(),-this.getNumEmptyDaysAtStart())}},{key:"getNumEmptyDaysAtStart",value:function(){return this.getStartDate().getDay()}},{key:"getNumEmptyDaysAtEnd",value:function(){return w-1-this.getEndDate().getDay()}},{key:"getWeekCount",value:function(){var e=this.getDateDifferenceInDays()+this.getNumEmptyDaysAtStart()+this.getNumEmptyDaysAtEnd();return Math.ceil(e/w)}},{key:"getWeekWidth",value:function(){return w*this.getSquareSizeWithGutter()}},{key:"getWidth",value:function(){return this.getWeekCount()*this.getSquareSizeWithGutter()-(this.props.gutterSize-this.getWeekdayLabelSize())}},{key:"getHeight",value:function(){return this.getWeekWidth()+(this.getMonthLabelSize()-this.props.gutterSize)+this.getWeekdayLabelSize()}},{key:"getValueForIndex",value:function(e){return this.valueCache[e]?this.valueCache[e].value:null}},{key:"getClassNameForIndex",value:function(e){return this.valueCache[e]?this.valueCache[e].className:this.props.classForValue(null)}},{key:"getTitleForIndex",value:function(e){return this.valueCache[e]?this.valueCache[e].title:this.props.titleForValue?this.props.titleForValue(null):null}},{key:"getTooltipDataAttrsForIndex",value:function(e){return this.valueCache[e]?this.valueCache[e].tooltipDataAttrs:this.getTooltipDataAttrsForValue({date:null,count:null})}},{key:"getTooltipDataAttrsForValue",value:function(e){var t=this.props.tooltipDataAttrs;return"function"==typeof t?t(e):t}},{key:"getTransformForWeek",value:function(e){return this.props.horizontal?"translate(".concat(e*this.getSquareSizeWithGutter(),", 0)"):"translate(0, ".concat(e*this.getSquareSizeWithGutter(),")")}},{key:"getTransformForWeekdayLabels",value:function(){return this.props.horizontal?"translate(".concat(E,", ").concat(this.getMonthLabelSize(),")"):null}},{key:"getTransformForMonthLabels",value:function(){return this.props.horizontal?"translate(".concat(this.getWeekdayLabelSize(),", 0)"):"translate(".concat(this.getWeekWidth()+N,", ").concat(this.getWeekdayLabelSize(),")")}},{key:"getTransformForAllWeeks",value:function(){return this.props.horizontal?"translate(".concat(this.getWeekdayLabelSize(),", ").concat(this.getMonthLabelSize(),")"):"translate(0, ".concat(this.getWeekdayLabelSize(),")")}},{key:"getViewBox",value:function(){return this.props.horizontal?"0 0 ".concat(this.getWidth()," ").concat(this.getHeight()):"0 0 ".concat(this.getHeight()," ").concat(this.getWidth())}},{key:"getSquareCoordinates",value:function(e){return this.props.horizontal?[0,e*this.getSquareSizeWithGutter()]:[e*this.getSquareSizeWithGutter(),0]}},{key:"getWeekdayLabelCoordinates",value:function(e){return this.props.horizontal?[0,(e+1)*E+e*this.props.gutterSize]:[e*E+e*this.props.gutterSize,E]}},{key:"getMonthLabelCoordinates",value:function(e){if(this.props.horizontal)return[e*this.getSquareSizeWithGutter(),this.getMonthLabelSize()-N];var t=-2;return[0,(e+1)*this.getSquareSizeWithGutter()+t]}},{key:"handleClick",value:function(e){this.props.onClick&&this.props.onClick(e)}},{key:"handleMouseOver",value:function(e,t){this.props.onMouseOver&&this.props.onMouseOver(e,t)}},{key:"handleMouseLeave",value:function(e,t){this.props.onMouseLeave&&this.props.onMouseLeave(e,t)}},{key:"renderSquare",value:function(t,n){var a=this;if((n<this.getNumEmptyDaysAtStart()||n>=this.getNumEmptyDaysAtStart()+this.getDateDifferenceInDays())&&!this.props.showOutOfRangeDays)return null;var r=h(this.getSquareCoordinates(t),2),o=r[0],i=r[1],l=this.getValueForIndex(n),u=e.createElement("rect",s({key:n,width:E,height:E,x:o,y:i,className:this.getClassNameForIndex(n),onClick:function(){return a.handleClick(l)},onMouseOver:function(e){return a.handleMouseOver(e,l)},onMouseLeave:function(e){return a.handleMouseLeave(e,l)}},this.getTooltipDataAttrsForIndex(n)),e.createElement("title",null,this.getTitleForIndex(n))),c=this.props.transformDayElement;return c?c(u,l,n):u}},{key:"renderWeek",value:function(t){var n=this;return e.createElement("g",{key:t,transform:this.getTransformForWeek(t),className:"".concat(F,"week")},z(w).map((function(e){return n.renderSquare(e,t*w+e)})))}},{key:"renderAllWeeks",value:function(){var e=this;return z(this.getWeekCount()).map((function(t){return e.renderWeek(t)}))}},{key:"renderMonthLabels",value:function(){var t=this;return this.props.showMonthLabels?z(this.getWeekCount()-1).map((function(n){var a=W(t.getStartDateWithEmptyDays(),(n+1)*w),r=h(t.getMonthLabelCoordinates(n),2),s=r[0],o=r[1];return a.getDate()>=1&&a.getDate()<=w?e.createElement("text",{key:n,x:s,y:o,className:"".concat(F,"month-label")},t.props.monthLabels[a.getMonth()]):null})):null}},{key:"renderWeekdayLabels",value:function(){var t=this;return this.props.showWeekdayLabels?this.props.weekdayLabels.map((function(n,a){var r=h(t.getWeekdayLabelCoordinates(a),2),s=r[0],o=r[1],i="".concat(t.props.horizontal?"":"".concat(F,"small-text")," ").concat(F,"weekday-label");return 1&a?e.createElement("text",{key:"".concat(s).concat(o),x:s,y:o,className:i},n):null})):null}},{key:"render",value:function(){return this.valueCache=this.getValueCache(this.props),e.createElement("svg",{className:"react-calendar-heatmap",viewBox:this.getViewBox()},e.createElement("g",{transform:this.getTransformForMonthLabels(),className:"".concat(F,"month-labels")},this.renderMonthLabels()),e.createElement("g",{transform:this.getTransformForAllWeeks(),className:"".concat(F,"all-weeks")},this.renderAllWeeks()),e.createElement("g",{transform:this.getTransformForWeekdayLabels(),className:"".concat(F,"weekday-labels")},this.renderWeekdayLabels()))}}]),l}(e.Component);return T.propTypes={values:k.arrayOf(k.shape({date:k.oneOfType([k.string,k.number,k.instanceOf(Date)]).isRequired}).isRequired).isRequired,numDays:k.number,startDate:k.oneOfType([k.string,k.number,k.instanceOf(Date)]),endDate:k.oneOfType([k.string,k.number,k.instanceOf(Date)]),gutterSize:k.number,horizontal:k.bool,showMonthLabels:k.bool,showWeekdayLabels:k.bool,showOutOfRangeDays:k.bool,tooltipDataAttrs:k.oneOfType([k.object,k.func]),titleForValue:k.func,classForValue:k.func,monthLabels:k.arrayOf(k.string),weekdayLabels:k.arrayOf(k.string),onClick:k.func,onMouseOver:k.func,onMouseLeave:k.func,transformDayElement:k.func},T.defaultProps={numDays:null,startDate:M(200),endDate:new Date,gutterSize:1,horizontal:!0,showMonthLabels:!0,showWeekdayLabels:!1,showOutOfRangeDays:!1,tooltipDataAttrs:null,titleForValue:null,classForValue:function(e){return e?"color-filled":"color-empty"},monthLabels:j,weekdayLabels:L,onClick:null,onMouseOver:null,onMouseLeave:null,transformDayElement:null},T}(n(67294))}}]);