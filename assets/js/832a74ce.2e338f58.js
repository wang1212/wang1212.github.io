"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[2731],{81545:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var l=a(67294),n=a(86010),r=a(76633),s=a(57277),c=a.n(s);const m="loading-coffee_Axg7",o=e=>l.createElement("div",{className:m},l.createElement("div",null),l.createElement("div",null),l.createElement("div",null)),i=(new Date).getFullYear(),d=Array.from(Array(i-2017+1),((e,t)=>2017+t)),u=Array.from(Array(12),((e,t)=>`${t+1}\u6708`)),v=["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],E=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"];var g=a(52263),y=a(59734);function p(e){let{metadata:t,eventsData:a}=e;return a?l.createElement("section",null,l.createElement("header",null,l.createElement("h3",{style:{display:"flex",alignItems:"center"}},a.date," ",l.createElement("span",{className:"margin-left--sm"},v[new Date(a.date).getDay()]),l.createElement("small",{className:"margin-right-md",style:{marginLeft:"auto",opacity:.3}},"\u7b2c ",(r=new Date(a.date),Math.floor((r-new Date(r.getFullYear(),0,0))/1e3/60/60/24))," \u5929"))),l.createElement("main",null,a.events.map(((e,a)=>{var r,s;return l.createElement("div",{key:a,className:(0,n.Z)("card","margin-bottom--md")},l.createElement("div",{className:"card__header"},l.createElement("h3",null,t.type[e.type])),l.createElement("div",{className:"card__body"},l.createElement("p",{dangerouslySetInnerHTML:{__html:null==(r=e.description)?void 0:r.replace(/\n/g,"<br />")}})),(null==(s=e.labels)?void 0:s.length)&&l.createElement("div",{className:"card__footer"},e.labels.map(((e,t)=>l.createElement("span",{key:t,className:"badge badge--secondary margin-right--sm"},e))))||"")})))):null;var r}function b(e){let{year:t,dataset:a,onDateClick:n}=e;const[r,s]=(0,l.useState)(null);return l.createElement("section",{className:"margin-bottom--md"},l.createElement(c(),{startDate:new Date(t-1+"-12-31"),endDate:new Date(`${t}-12-31`),monthLabels:u,weekdayLabels:E,tooltipDataAttrs:e=>({"data-tooltip":`test ${null==e?void 0:e.date}`}),classForValue:e=>{var t;return e?(null==e||null==(t=e.events)?void 0:t.length)<=4?`color-github-${e.events.length}`:"color-github-4":"color-empty"},onClick:e=>null==n?void 0:n(e),onMouseOver:(e,t)=>s(t?{event:e,data:t}:null),onMouseLeave:()=>s(null),values:a}))}const h=()=>{const[e,t]=(0,l.useState)(i),{data:a,isError:n,isLoading:s}=function(e){const t=(0,g.Z)(),{data:a,error:l,isLoading:n}=(0,y.ZP)(`/api/record/${e}`,(()=>fetch(`${t.siteConfig.baseUrl}database/record/${e}.json`).then((e=>e.json()))));return{data:a,isError:l,isLoading:n}}(e),[c,m]=(0,l.useState)(null),u=(0,l.useMemo)((()=>{let e=[];return a?(Object.keys(a.events).forEach((t=>{e.push({date:`${a.metadata.year}-${t}`,events:a.events[t]})})),m(e[0]),e):(m(null),e)}),[a]);return l.createElement(r.Z,{title:"\u8bb0\u5f55"},l.createElement("div",{className:"margin-vert--lg"},l.createElement("div",{className:"container"},l.createElement("section",{className:"margin-bottom--lg"},l.createElement("div",{className:"dropdown dropdown--hoverable"},l.createElement("button",{className:"button button--primary"},e,"\u5e74"),l.createElement("ul",{className:"dropdown__menu"},d.slice().sort(((e,t)=>t-e)).map((e=>l.createElement("li",{key:e},l.createElement("a",{className:"dropdown__link",href:"#",onClick:a=>{a.preventDefault(),t(e)}},e,"\u5e74"))))))),(n||s)&&l.createElement("section",{className:"margin-vert--xl",style:{display:"flex",justifyContent:"center"}},l.createElement(o,null))||"",!n&&!s&&l.createElement(l.Fragment,null,l.createElement(b,{year:e,dataset:u,onDateClick:m}),l.createElement(p,{metadata:a.metadata,eventsData:c}))||"")))}}}]);