<!DOCTYPE html>
<html lang="zh-CN">
<body>
	<header class="jumbotron jumbotron-fluid">
		<div class="container">
			<h1 class="page-title display-4">使用 Git</h1>
			<p>
				<span class="tag tag-danger">Git</span>&nbsp;&nbsp;&nbsp;
				<span class="tag tag-warning">Bash</span>
			</p>
			<p class="head-indent lead">
				Git 是一个分布式的版本控制工具，类似的版本控制工具还有 SVN ；由于 GitHub 平台的盛行，也使得 git 更加受欢迎，在 Windows 平台使用 git 也是非常方便的。
			</p>
			<hr />
			<p>
				<span id="time" class="tag tag-pill tag-success">发表于 2016-12-31</span>&nbsp;
				<span id="categories" class="tag tag-pill tag-success">分类 Tools</span>
			</p>
		</div>
	</header>
	<div class="container">
		<div class="row">
			<div class="col-md-9">
				<section>
					<h2>Git</h2>
					<p class="head-indent">
						Git 是一个非常强大的版本控制工具，所谓的版本控制即就是对一个项目的更改进行记录，随后可以进行撤销、查看等功能。对于大型的开源项目，版本控制工具提供了非常大的便利，可以多人同时协作开发。Github 则提供了这样一个平台，使用 git 进行项目维护，世界上大多数的开源项目都在 github 仓库中进行展示。而 github 对程序员也是友好的，因为我们个人也可以使用免费的仓库，来维护自己的项目。
					</p>
					<p class="head-indent">
						Git 源于 Linux ，但不仅仅限于 Linux 平台下的使用， Git for Windows 就是最好的选择：
					</p>
					<blockquote>
						<b>Git for Windows：</b><a href="https://git-scm.com/" target="_blank">https://git-scm.com/</a>
					</blockquote>
				</section>
				<section>
					<h2>Git Bash</h2>
					<p class="head-indent">
						Git 在 Windows 下提供了图形用户界面（Git GUI）和命令行（Git Bash）两种操作方式，不过我更推荐使用后者，命令行更快速、简单一些。
					</p>
					<p class="head-indent">
						安装好后，我们打开 Bash 终端，可以在界面上<code>右键-->Options-->Text</code>，更改字体大小和字符编码，推荐将字符编码改为<strong>UTF-8</strong>。
					</p>
					<section>
						<h3>配置</h3>
						<p class="head-indent">
							我们首先可以对 Git 进行简单的配置，使用 SSH 来避免重复提交时每次都要输入密码。
						</p>
						<section>
							<h4>个人信息</h4>
							<p class="head-indent">
								进行用户名和邮箱的全局配置：
							</p>
							<pre class="language-bash"><code>git config --global user.name "MrWang"
git config --global user.email "wangyuan230@163.com"</code></pre>
						</section>
						<section>
							<h4>SSH 密钥</h4>
							<p class="head-indent">
								安装 SSH 密钥可以在我们进行项目提交时避免重复输入用户名密码，也更安全。可以直接查看 GitHub 官方文档：
							</p>
							<blockquote>
								<b>Help：</b><a href="https://help.github.com/articles/generating-an-ssh-key/" target="_blank">https://help.github.com/articles/generating-an-ssh-key/</a>
							</blockquote>
							<p class="head-indent">检查是否已有 SSH 密钥文件：</p>
							<pre class="language-bash"><code>ls -al ~/.ssh</code></pre>
							<p class="head-indent">如果不存在（或者想覆盖），可以生成一个新的 SSH 密钥文件：</p>
							<pre class="language-bash"><code>ssh-keygen -t rsa -b 4096 -C "wangyuan230@163.com"</code></pre>
							<p class="head-indent">这里使用你的邮箱作为 SSH 密钥标签，该过程中直接全按回车即可。</p>
							<p class="head-indent">得到 SSH 密钥文件后，接下来应该将该密钥添加到 ssh-agent ：</p>
							<pre class="language-bash"><code># 启动 ssh-agent
eval $(ssh-agent -s)
# 添加 SSH
ssh-add ~/.ssh/id_rsa</code></pre>
							<p class="head-indent">
								最后将 SSH 添加到你的 GitHub 账户即可，先将密钥文件复制到剪切板：
							</p>
							<pre class="language-bash"><code>clip < ~/.ssh/id_rsa.pub</code></pre>
							<p class="head-indent">
								然后，打开 <a href="https://github.com/login" target="_blank">GitHub</a> 网站登录你的帐户，右上角头像进入<code>Settings</code>，左边导航选择<code>SSH and GPG keys</code>，点击<code>New SSH key</code>，自己命名一个 title，然后将 SSH 文件复制到 key 框中，然后需要输入你的 github 账户密码。
							</p>
							<p class="head-indent">最后，可以测试一下：</p>
							<pre class="language-bash"><code>ssh -T git@github.com</code></pre>
							<p class="head-indent">回车后输入<strong>yes</strong>，如果看到 <b>Hi 你的用户名</b> 一串信息，就说明添加 SSH 密钥成功了。</p>
						</section>
					</section>
					<section>
						<h3>使用</h3>
						<p class="head-indent">下面来看看 git bash 下一些常用的 git 命令，介绍一下其简单的用法。</p>
						<section>
							<h4>初始化</h4>
							<p class="head-indent">
								在创建好一个新文件夹之后，进入该空白文件夹，我们在 git bash 中输入<code>init</code>命令即可初始化该文件夹为一个新的 git 仓库。
							</p>
							<pre class="language-bash"><code># 初始化仓库
git init</code></pre>
							<p class="head-indent">初始化完成后，该文件夹会出现一个隐藏的<strong> .git </strong>文件夹，可以使用<code>ls</code>命令查看是否已生成该文件夹</p>
							<pre class="language-bash"><code># 查看文件
ls -a</code></pre>
							<p class="head-indent">
								该文件夹为仓库管理文件，并且是隐藏，一般情况下不要修改其中的文件。
							</p>
						</section>
						<section>
							<h4>添加与提交</h4>
							<p class="head-indent">
								Git 的工作状态有3个，分别为<strong>工作区（working directory）</strong>、<strong>暂存区（staging index）</strong>和<strong>版本库（Repository）</strong>。我们在个人仓库（本地文件夹）中修改代码时，就处于工作区中；修改完成后，需要使用<code>add</code>命令将修改好的文件添加到暂存区中；随后，确认无误后我们可以使用<code>commit</code>命令将已添加到暂存区的文件提交到版本库中。
							</p>
							<pre class="language-bash"><code># 第一步：添加文件到暂存区
git add file_name  # 例如 git add index.html
# 第二步：将暂存区文件提交到版本库中
git commit -m "version_message"  # 例如 git commit -m "1.0"</code></pre>
							<p class="head-indent">另外地，为了方便我们可以一次性将当前文件夹（工作区）的所有文件都添加到暂存区中：</p>
							<pre class="language-bash"><code># 添加工作区所有文件到暂存区
git add .</code></pre>
							<p class="head-indent">当然了，我们还可以将添加与提交操作合二为一，跳过暂存区：</p>
							<pre class="language-bash"><code># 一次性添加与提交工作区文件到版本库
git commit -am "version_message"</code></pre>
						</section>
						<section>
							<h4>查看信息</h4>
							<p class="head-indent">
								如果能随时查看仓库中文件的修改情况以及与版本库中文件进行对比的结果可以方便很多，其实使用<code>status</code>和<code>log</code>命令即可查看所需要的信息。
							</p>
							<pre class="language-bash"><code># 查看目前文件修改情况（是否已添加、提交）
git status
# 查看已提交的文件日志
git log</code></pre>
						</section>
						<section>
							<h4>撤销操作</h4>
							<p class="head-indent">当我们将文件修改后，如果发现更改并不恰当，需要回滚到修改之前的状态时，可以撤销我们的更改操作。</p>
							<pre class="language-bash"><code># 撤销工作区改动，将暂存区文件覆盖到工作区
git checkout -- file_name</code></pre>
							<p class="head-indent">这个命令所做的就是用暂存区中的文件来覆盖工作区已被修改的文件，从而实现撤销工作区的修改操作。</p>
							<pre class="language-bash"><code># 撤销暂存区改动，将版本库文件覆盖到暂存区
git reset HEAD -- file_name</code></pre>
							<p class="head-indent">
								而这个命令所做的则是用版本库中的文件来覆盖暂存区中已被修改的文件，从而实现撤销暂存区的修改操作。这里的<strong>HEAD</strong>指的是最近一次提交操作，可以将其更换为你需要撤销的提交操作的ID号，可以使用<code>log</code>命令查看提交信息中的ID。
							</p>
							<p class="head-indent">
								实际上，先撤销暂存区改动，再撤销工作区改动，就可以将版本库中的文件恢复到工作区中。另外，还可以撤销提交操作并重新进行提交，这个命令可以用来修改提交信息和内容。
							</p>
							<pre class="language-bash"><code># 第一次提交
git commit -m "version 1.0"
# 撤销上次提交修改提交信息并重新提交
git commit --amend</code></pre>
						</section>
						<section>
							<h4>删除操作</h4>
							<p class="head-indent">有时候我们可能把不需要添加到暂存区的文件给添加到了暂存区，这时候可以使用以下命令将其在暂存区中删除：</p>
							<pre class="language-bash"><code># 仅删除暂存区中的文件
git rm --cached file_name</code></pre>
							<p class="head-indent">当然，也有可能我们想直接删除掉工作区和暂存区中的文件：</p>
							<pre class="language-bash"><code># 同时删除工作区与暂存区中的文件
git rm -f file_name</code></pre>
							<p class="head-indent">
								除此之外，还有一种情况就是我们在工作区将同一个文件重命名后，需要删除原有在暂存区中的文件，添加新的文件到暂存区中，但是它们的文件内容是相同的。所以，直接可以进行重命名操作：
							</p>
							<pre class="language-bash"><code>git mv old_filename new_filename</code></pre>
						</section>
					</section>
				</section>		
			</div>			
		</div>		
	</div>
	
	<script src="/source/js/prism.js"></script>
</body>
</html>