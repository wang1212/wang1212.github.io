<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no">
	<title>博文分类Cotegories</title>
	<link rel="icon" href="/favicon.ico">
	<link rel="stylesheet" href="/source/css/bootstrap.min.css">
	<link rel="stylesheet" href="/source/css/font-awesome.min.css">
	<style>
		body {
			font-family: "FontAwesome", Helvetica,Tahoma,Arial,"Microsoft YaHei","华文细黑",sans-serif;
		}
		.jumbotron {
			padding-bottom: 1rem;
		}
		li[id*="cate-"] {
			border-color: #fff;
		}
		li[id*="cate-"] .list-group-item-heading {
			cursor: pointer;
		}
		.page-footer {
			border-top: 1px solid gray;
			padding: 1rem 0 2rem;
			margin: 2.25rem 0 0.75rem;
		}
		.page-footer img {
			width: 7.5rem;
			height: 7.5rem;
			margin-bottom: 1.25rem;
		}
		#foot-nav {
			font-size: 1.75rem;
			text-align: center;
			color: white;
			height: 2.5rem;
			line-height: 2.5rem;
			position: fixed;
			right: 2.25rem;
			bottom: 1.25rem;
			z-index: 20;
		}
		#foot-nav > div {
			width: 2.5rem;
			border-radius: 2.5rem;
			background-color: black;
			float: right;
			margin-left: 0.75rem;
			cursor: pointer;
			opacity: 0.5;
			transition: opacity .8s,0s linear;
		}		
		#foot-nav  div:hover {
			opacity: 1;
		}
		#foot-nav a,#foot-nav a:hover {
			color: white;
			text-decoration: none;
		}		
	</style>
</head>
<body>
	<header class="jumbotron jumbotron-fluid">
		<div class="container">
			<h1 class="display-3">博文分类 <small class="text-muted hidden-sm-down">Categories</small></h1>
			<hr />
			<p class="lead">分享与交流是让我获得提升的最佳途径<br />
			<span class="hidden-xs-down">Sharing and communication is the best way to get my promotion</span></p>
		</div>
	</header>
	<div class="container">
		<ul class="list-group">
			<li class="list-group-item" style="border-color: #fff">
				<p class="text-xs-center">正在奋力加载哟...</p>
			</li>
		</ul>
	</div>
	<footer class="page-footer">
		<div class="container">
			<div class="row text-xs-center">
				<div class="col-md-2 offset-md-2">
					<img class="rounded" src="/source/images/head.jpg" alt="head">
				</div>
				<div class="col-md-6">
					<p class="lead">用心对待每一个人、每一件事</p>
					<p>Mr.Wang（不如怀念）</p>
					<p>E-mail：wangyuan230@163.com</p>
				</div>
			</div>
		</div>
	</footer>
	<nav id="foot-nav">
		<div id="to-top" style="display:none">
			<a href="#" class="fa fa-arrow-up"></a>
		</div>
		<div>
			<a href="/" class="fa fa-home"></a>
		</div>
	</nav>

	<script src="/source/js/jquery-3.1.0.min.js"></script>
	<script>
		$(function(){
			$.getJSON('/source/json/categories.json',function(data){
				var str = '',
					num = 0,
					articles = 0;

				for (var i in data) {
					str += '<li id="cate-' + i + '" class="list-group-item">';
					str += '<h5 class="list-group-item list-group-item-heading list-group-item-action">' + i;
					str += '<div class="float-xs-right"><span class="hidden-md-down tag tag-pill tag-danger">最新：&nbsp;&nbsp;&nbsp;' + data[i][0].title + '</span>&nbsp;';
					str += '<span class="hidden-xs-down tag tag-pill tag-success">最后发表于&nbsp;&nbsp;&nbsp;' + data[i][0].time + '</span>&nbsp;';
					str += '<span class="tag tag-pill tag-primary">' + data[i].length + '&nbsp;&nbsp;&nbsp;articles</span></div></h5>';
					str += '<ul style="display:none" class="list-group"><p class="text-xs-center">正在奋力加载哟...</p></ul></li>';
					num++;
					articles += data[i].length;
				}

				$('.container > .list-group')
					.css('display', 'none')
					.append($(str))
					.children()
					.first()
					.html('有 ' + num + ' 个类别，共 ' + articles + ' 篇文章。加油喔！<small class="hidden-sm-down text-muted">There are ' + num + ' categories, ' + articles + ' articles. Come on!</small>')
					.end().end()
					.slideDown();
			});

			$('body > .container').on('click','li[id*="cate-"] .list-group-item-heading',function(){
				var $self = $(this),
				 	key = $self.parent().attr('id').substr(5),
				 	$ul = $self.next('ul');

				$ul.slideToggle();

				if (!$ul.data('hasData')) {
					$.getJSON('/source/json/categories.json',function(data){
						var str = '';
						for (var i in data[key]){
							str += '<a href="' + data[key][i].path + '" class="list-group-item list-group-item-action list-group-item-success">' + data[key][i].title + '<span class="hidden-sm-down float-xs-right">' + data[key][i].time + '</span></a>';
						}
						$ul.css('display', 'none').html(str).slideToggle();
					});
					$ul.data('hasData', true);
				}

			});

			$(window).on('scroll', function() {
				var $self = $(this),
					w_scrollTop = $self.scrollTop(),
					$top = $('#to-top');		

				w_scrollTop > $self.height() ? $top.show(1000) : $top.hide(1000)	
			});
		});
	</script>	
</body>
</html>