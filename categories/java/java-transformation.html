<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, maximum-scale=1, user-scalable=no">
	<title>Java-上转型对象</title>
	<link rel="stylesheet" href="/source/css/bootstrap.min.css">
	<link rel="stylesheet" href="/source/css/font-awesome.min.css">
	<link rel="stylesheet" href="/source/css/prism.css">
	<link rel="stylesheet" href="/source/css/main.css">
</head>
<body>
	<header class="jumbotron jumbotron-fluid">
		<div class="container">
			<h1 class="display-4">Java-上转型对象</h1>
			<p>
				<span class="tag tag-danger">Java</span>&nbsp;&nbsp;&nbsp;
				<span class="tag tag-warning">上转型</span>
			</p>
			<p class="head-indent lead">
				Java 是一种面向对象的语言，面向对象的语言具有三样特性：封装性、继承性、多态性。而 Java 中多态的实现有一种方式叫做上转型对象。
			</p>
			<hr />
			<p>
				<span id="time" class="tag tag-pill tag-success">发表于 2016-5-7</span>&nbsp;
				<span id="categories" class="tag tag-pill tag-success">分类 Java</span>
			</p>
		</div>
	</header>
	<div class="container">
		<div class="row">
			<div class="col-md-9">
				<section>
					<h2>Java 的多态性</h2>
					<p class="head-indent">Java 的多态性实现有三个必要条件：</p>
					<ul>
						<li>有继承的存在</li>
						<li>子类重写父类方法</li>
						<li>父类引用变量指向子类对象（上转型）</li>
					</ul>
					<p class="head-indent">下面，就来详细的了解一下 Java 中实现多态的关键条件，即上转型对象。</p>
				</section>
				<section>
					<h2>上转型</h2>
					<p class="head-indent"><b>若A为父类，B继承了A作为其的子类，当创建子类(B)对象b时将其引用赋给父类(A)对象类型变量a，则称对象变量a是对象b的上转型对象。</b>下面通过代码来说明：</p>
					<pre class="language-java line-numbers"><code>class A {}  // 父类
class B extends A {}  // 子类
A a;
B b = new B();
a = b;  // 子类对象赋给父类引用
// 上面三句可以简写为一句
A a = new B();</code></pre>
					<p class="head-indent">上转型是有代价的，是要牺牲一部分子类特性的，下面来看看上转型对象的特点：</p>
					<ul>
						<li>上转型对象只能操作子类与父类共有的成员变量和实例方法；</li>
						<li>上转型对象可以操作子类继承和隐藏父类的成员变量；</li>
						<li>上转型对象可以操作子类继承和重写父类的实例方法；</li>
						<li>上转型对象可以通过下转型恢复所有的继承关系。</li>
					</ul>
					<p class="head-indent">现在来解释一下上面几点。第一点，上转型对象不能操作子类中新增的成员变量或者实例方法，也就是说丧失了子类的自由性，只允许操作继承自父类的共性。第二点，上转型对象可以操作继承自父类的成员变量，以及包括子类中重新赋值后(对父类隐藏)的相应成员变量。第三点，上转型对象可以操作继承自父类的实例方法，以及包括子类中重写了父类中的相应实例方法。第四点，上转型对象可以通过下转型操作来恢复对父类的继承关系，并恢复所有在子类中新增的成员变量和实例方法的操作权。</p>
					<p class="head-indent">由于 Java 是向上继承的，即子类继承父类，所以上转型只能是子类对象转型为父类对象，而父类对象转型为子类对象则称为下转型。下面简单介绍一下下转型。</p>
				</section>
				<section>
					<h2>下转型</h2>
					<pre class="language-java line-numbers"><code>class A {}  // 父类
class B extends A {}  // 子类
// 第一种：父类对象下转型为子类对象
A a = new A();
B b = (A)a;  // 运行，解释器报错！！！
// 第二种：上转型对象下转型为相应子类对象
A a = new B();
B b = (B)a;  // 运行，正常。</code></pre>
					<p class="head-indent">上面尝试了两种下转型操作，第一种解释器会报错，而第二种运行正常。原因如下：当父类对象下转型为子类对象时，由于父类中很可能没有子类中的新增的实例方法和成员变量，解释器会给出错误警告；而当上转型对象下转型为相应的子类对象时，相当于恢复了原先的继承关系，所以解释器不会报错。</p>
					<p class="head-indent"><b>注意：上转型对象下转型为子类对象时，这个子类必须为上转型操作时的相应子类，否则解释器也会报错；上转型解释器会自动执行，而下转型需要强制转型。</b></p>
				</section>
				<section>
					<h2>结语</h2>
					<p class="head-indent">作为面向对象语言，Java 采用上转型对象来实现多态，导致对于多态的理解也显得较为抽象，不过这也并不是很难。</p>
				</section>	
			</div>			
		</div>		
	</div>
	
	<script src="/source/js/jquery-3.1.0.min.js"></script>
	<script src="/source/js/prism.js"></script>
	<script src="/source/js/main.js"></script>
</body>
</html>