<h2 id="-">节点属性常用操作</h2>
<p>　　每个 HTML 元素都有很多属性，例如（id、class、name、url、src、href）等等，元素节点上定义了一些方法供我们使用，来对这些属性进行设置、获取、移除操作。</p>
<ul>
<li>setAttribute()</li>
<li>getAttribute()</li>
<li>removeAttribute()</li>
</ul>
<p>exp:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 200px;height: 200px;"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> img_obj=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"img"</span>);

    <span class="hljs-comment">// 用方法设置单个属性</span>
    img_obj.setAttribute(<span class="hljs-string">"src"</span>,<span class="hljs-string">"123.png"</span>);
    img_obj.setAttribute(<span class="hljs-string">"title"</span>,<span class="hljs-string">"img"</span>);
    img_obj.setAttribute(<span class="hljs-string">"alt"</span>,<span class="hljs-string">"img"</span>);

    <span class="hljs-comment">// 用方法获取单个属性</span>
    <span class="hljs-built_in">console</span>.log(img_obj.getAttribute(<span class="hljs-string">"src"</span>));  <span class="hljs-comment">// 输出 123.png</span>
    <span class="hljs-built_in">console</span>.log(img_obj.getAttribute(<span class="hljs-string">"title"</span>));  <span class="hljs-comment">// 输出 img</span>
    <span class="hljs-built_in">console</span>.log(img_obj.getAttribute(<span class="hljs-string">"alt"</span>));  <span class="hljs-comment">// 输出 img</span>

    <span class="hljs-comment">// 用方法移除单个属性</span>
    img_obj.removeAttribute(<span class="hljs-string">"src"</span>);
    img_obj.removeAttribute(<span class="hljs-string">"title"</span>);
    img_obj.removeAttribute(<span class="hljs-string">"alt"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>　　要注意的是，我们通常也可以直接获取、设置、移除某个元素节点上的属性，但是用方法获取比较好，并且获取的是原始值。例如，img 元素的 <code>src</code> 属性若直接获取得到的是计算后的绝对路径，而用 <code>getAttribute()</code> 方法获取得到的则是我们写在标签上的原始数据。</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// 直接获取属性（绝对路径）</span>
    <span class="hljs-built_in">console</span>.log(img_obj.src);
    <span class="hljs-comment">// 输出 file:///C:/Users/Administrator.USER-20141121ES/Desktop/html/123.png</span>

    <span class="hljs-comment">// 用方法获取（原始值）</span>
    <span class="hljs-built_in">console</span>.log(img_obj.getAttribute(<span class="hljs-string">"src"</span>));
    <span class="hljs-comment">// 输出 123.png</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>　　<strong>所以，我们要获取元素的属性，务必用 <code>getAttribute()</code> 方法。</strong></p>
<h2 id="-css-">内联CSS属性</h2>
<p>　　每个 HTML 元素都有个 <code>style</code> 属性，可以用来插入针对该元素的内联CSS属性。</p>
<pre><code><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 200px;height: 200px;background-color: #ccc;border: 5px dotted blue;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// 获取内联style属性</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>).style);
    <span class="hljs-comment">// 输出 CSSStyleDeclaration </span></span></span><span class="hljs-template-variable">{0: "width", 1: "height", 2: "background-color"...}</span><span class="xml"><span class="undefined">
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre><p>　　<strong>元素节点的 style 内联属性返回一个 <code>CSSStyleDeclaration</code> 对象，该对象仅包含该元素节点的内联 CSS 属性（不包含内部样式表、外部样式表中的 CSS 属性）。</strong></p>
<h3 id="-css-">单个CSS属性操作</h3>
<p>　　元素节点的内联CSS属性都是该元素的 <code>style（CSSStyleDeclaration）</code> 对象上的一个个属性，所以我们可以通过 style（CSSStyleDeclaration）对象来设置、获取、移除单个内联 CSS 属性。</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> div_style=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>).style;

    <span class="hljs-comment">// 直接设置单个内联CSS属性</span>
    div_style.width=<span class="hljs-string">"200px"</span>;
    div_style.height=<span class="hljs-string">"200px"</span>;
    div_style.backgroundColor=<span class="hljs-string">"red"</span>;

    <span class="hljs-comment">// 直接获取单个内联CSS属性</span>
    <span class="hljs-built_in">console</span>.log(div_style.width); <span class="hljs-comment">//输出200px</span>
    <span class="hljs-built_in">console</span>.log(div_style.height); <span class="hljs-comment">//输出200px</span>
    <span class="hljs-built_in">console</span>.log(div_style.backgroundColor);  <span class="hljs-comment">// 输出red</span>

    <span class="hljs-comment">// 直接移除单个内联CSS属性</span>
    div_style.width=<span class="hljs-string">""</span>;
    div_style.height=<span class="hljs-string">""</span>;
    div_style.backgroundColor=<span class="hljs-string">""</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>　　要注意的是，<code>style（CSSStyleDeclaration）</code> 对象的属性名并不包含 <code>-</code> 字符，比如  <code>background-color</code> 属性名是不存在的。这些包含横线的属性名需要转译，通常规则如下：</p>
<pre><code><span class="hljs-comment">// 写成驼峰体命名法</span>
<span class="hljs-function"><span class="hljs-title">background</span>-<span class="hljs-built_in">color</span> ---&gt;</span> backgroundColor
<span class="hljs-function"><span class="hljs-title">font</span>-size ---&gt;</span> fontSize
<span class="hljs-function"><span class="hljs-title">border</span>-bottom ---&gt;</span> borderBottom
<span class="hljs-function"><span class="hljs-title">margin</span>-top ---&gt;</span> marginTop

<span class="hljs-comment">// 简写属性也可以</span>
<span class="hljs-function"><span class="hljs-title">border</span> ---&gt;</span> border
<span class="hljs-function"><span class="hljs-title">margin</span> ---&gt;</span> margin

<span class="hljs-comment">// 如果属性名为 javascript 关键字，则加前缀</span>
<span class="hljs-function"><span class="hljs-title">float</span> ---&gt;</span> cssFloat
</code></pre><p>　　如果我们觉得属性名转译不太方便的话，我们还可以通过 <code>style（CSSStyleDeclaration）</code> 对象上定义的方法来进行设置、获取、移除单个内联 CSS 属性的操作。</p>
<ul>
<li>setProperty()</li>
<li>getPropertyValue()</li>
<li>removeProperty()</li>
</ul>
<p>exp:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> div_style=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>).style;

    <span class="hljs-comment">// 用方法设置单个内联CSS属性</span>
    div_style.setProperty(<span class="hljs-string">"width"</span>,<span class="hljs-string">"200px"</span>);
    div_style.setProperty(<span class="hljs-string">"height"</span>,<span class="hljs-string">"200px"</span>);
    div_style.setProperty(<span class="hljs-string">"background-color"</span>,<span class="hljs-string">"red"</span>);

    <span class="hljs-comment">// 用方法获取单个内联CSS属性</span>
    <span class="hljs-built_in">console</span>.log(div_style.getPropertyValue(<span class="hljs-string">"width"</span>));  <span class="hljs-comment">// 输出200px</span>
    <span class="hljs-built_in">console</span>.log(div_style.getPropertyValue(<span class="hljs-string">"height"</span>));  <span class="hljs-comment">// 输出200px</span>
    <span class="hljs-built_in">console</span>.log(div_style.getPropertyValue(<span class="hljs-string">"background-color"</span>));  <span class="hljs-comment">// 输出red</span>

    <span class="hljs-comment">// 用方法移除单个内联CSS属性</span>
    div_style.removeProperty(<span class="hljs-string">"width"</span>);
    div_style.removeProperty(<span class="hljs-string">"height"</span>);
    div_style.removeProperty(<span class="hljs-string">"backgroundColor"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><h3 id="-css-">批量CSS属性操作</h3>
<p>　　当我们需要批量操作内联 CSS 属性的时候，一个一个的进行未免太过麻烦，这里我们可以一次性改变所有内联 CSS 属性。</p>
<ul>
<li>cssText</li>
</ul>
<p>exp:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> div_obj=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>);

    <span class="hljs-comment">// 用内联style属性对象上的方法</span>
    <span class="hljs-comment">// 设置所有内联CSS属性</span>
    div_obj.style.cssText=<span class="hljs-string">"width: 200px;height: 200px;background-color: #ccc"</span>;
    <span class="hljs-comment">// 获取所有内联CSS属性</span>
    <span class="hljs-built_in">console</span>.log(div_obj.style.cssText);
    <span class="hljs-comment">// 输出 width: 200px; height: 200px; background-color: rgb(204, 204, 204);</span>
    <span class="hljs-comment">// 移除所有内联CSS属性</span>
    div_obj.style.cssText=<span class="hljs-string">""</span>;

    <span class="hljs-comment">// 用元素自身的方法</span>
    <span class="hljs-comment">// 设置所有内联CSS属性</span>
    div_obj.setAttribute(<span class="hljs-string">"style"</span>,<span class="hljs-string">"width: 200px;height: 200px;background-color: #ccc"</span>);
    <span class="hljs-comment">// 获取所有内联CSS属性</span>
    <span class="hljs-built_in">console</span>.log(div_obj.getAttribute(<span class="hljs-string">"style"</span>));
    <span class="hljs-comment">// 输出 width: 200px;height: 200px;background-color: #ccc;</span>
    <span class="hljs-comment">// 移除所有内联CSS属性</span>
    div_obj.removeAttribute(<span class="hljs-string">"style"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><h2 id="-css-">计算后的CSS属性</h2>
<p>　　我们其实最想得到的是元素内联 CSS 样式以及级联（内部样式表、外部样式表）CSS 样式计算后得到的最终样式，而不仅仅是未计算的内联样式。</p>
<ul>
<li>getComputedStyle()</li>
</ul>
<p>exp:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">div</span>{
        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background-color: red;border: 1px solid blue;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> div_obj=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>);

    <span class="hljs-comment">// 此为内部样式表中的CSS属性</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.getComputedStyle(div_obj).width);
    <span class="hljs-comment">// 输出 200px</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.getComputedStyle(div_obj).height);
    <span class="hljs-comment">// 输出 200px</span>

    <span class="hljs-comment">// 内联CSS属性覆盖了内部样式表中的CSS属性</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.getComputedStyle(div_obj).backgroundColor);
    <span class="hljs-comment">// 输出 rgb(255, 0, 0)</span>

    <span class="hljs-comment">// 此为内联CSS属性</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">window</span>.getComputedStyle(div_obj).border);
    <span class="hljs-comment">// 输出 1px solid rgb(0, 0, 255)</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>　　<strong><code>getComputedStyle()</code> 方法获取的是计算后的最终样式（包括内联样式、内部样式表、外部样式表），CSS属性名注意要进行转译（例如，background-color =&gt; backgroundColor）。</strong></p>
<h2 id="-id-class-css-">利用id和class改变CSS样式</h2>
<p>　　更多的时候，我们都是将CSS样式写在内部样式表或者外部样式表中的，这样做便于维护和替换。我们可以通过改变元素节点的内联 <code>id</code> 或 <code>class</code> 属性来批量替换 CSS 样式。</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-id">#a</span>{
        <span class="hljs-attribute">background-color</span>: red;
    }
    <span class="hljs-selector-class">.b1</span>{
        <span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid blue;
    }
    <span class="hljs-selector-class">.b2</span>{
        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
        <span class="hljs-attribute">background-color</span>: yellow;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"b1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> div_obj=<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"div"</span>);
    <span class="hljs-comment">// 添加ID，改变背景颜色</span>
    div_obj.setAttribute(<span class="hljs-string">"id"</span>,<span class="hljs-string">"a"</span>);
    <span class="hljs-comment">// 获取ID</span>
    <span class="hljs-built_in">console</span>.log(div_obj.getAttribute(<span class="hljs-string">"id"</span>));  <span class="hljs-comment">// 输出 a</span>
    <span class="hljs-comment">// 去掉ID</span>
    div_obj.removeAttribute(<span class="hljs-string">"id"</span>);

    <span class="hljs-comment">// 添加class,让DIV居中 </span>
    div_obj.classList.add(<span class="hljs-string">"b2"</span>);
    <span class="hljs-comment">// 获取class</span>
    <span class="hljs-built_in">console</span>.log(div_obj.getAttribute(<span class="hljs-string">"class"</span>));  <span class="hljs-comment">// 输出 b1 b2</span>
    <span class="hljs-built_in">console</span>.log(div_obj.classList); <span class="hljs-comment">//输出 DOMTokenList ["b1","b2"]</span>
    <span class="hljs-comment">// 删减class的一部分，去掉边框</span>
    div_obj.classList.remove(<span class="hljs-string">"b1"</span>);
    <span class="hljs-comment">// 再次获取class</span>
    <span class="hljs-built_in">console</span>.log(div_obj.getAttribute(<span class="hljs-string">"class"</span>));   <span class="hljs-comment">// 输出 b2</span>
    <span class="hljs-built_in">console</span>.log(div_obj.classList); <span class="hljs-comment">//输出 DOMTokenList ["b2"]</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><p>　　<strong>要特别注意的是，通过改变 <code>id</code> 或 <code>class</code> 属性值更改的是内部样式表、外部样式表中的 CSS 样式属性，要比内联 CSS 样式属性的优先级低。</strong></p>
<h2 id="-">结语</h2>
<p>　　其实要进行批量的改变 CSS 样式，我们完全可以替换元素的 <code>id</code> 和 <code>class</code> 属性（CSS 选择器），这样既方便还可以重复利用样式，这也是我们常用的方式。</p>
<h2 id="-">参考</h2>
<ul>
<li>《DOM启蒙》，Cody Lindley，陈养剑 译</li>
</ul>
